<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>             <meta http-equiv="expires" content="0"></meta>             <meta http-equiv="Cache-Control" content="no-cache"></meta>             <meta http-equiv="Cache-Control" content="no-cache"></meta>
        <title>.:DMES:. - Mantenimiento Preventivo</title>
        <link rel="stylesheet" type="text/css" href="#{request.contextPath}/css/webStyle.css"/>
        <script type="text/javascript">
            function start() {
                PF('statusDialog').show();
            }

            function stop() {
                PF('statusDialog').hide();
            }
            //window.setTimeout("preventiveInit()",1000);
        </script>
    </h:head>
    <h:body style="background-color: #000;">
        <p:ajaxStatus onstart="PF('statusDialog').show()" oncomplete="PF('statusDialog').hide()"/>
        <p:dialog modal="true" widgetVar="statusDialog" header="Cargando..."
                  draggable="false" closable="false" resizable="false">
            <p:graphicImage value="/images/loadBar.gif"/>
        </p:dialog>
        <div>
            <p:growl autoUpdate="true" showDetail="true" life="8000" />

                  <!--         Dialogo para guardar nuevos mantenimientos         -->
            <p:dialog id="dialogMaintenance" widgetVar="dialogMaintenance" draggable="true" 
                      closable="true"  header="Crear Mantenimientos Preventivos" position="center top" width="800"
                      hideEffect="explode" modal="true" showEffect="explode" resizable="true">

                <h:form id="formWizarMaintenanceSave" >

                    <p:wizard  flowListener="#{OtmaintenancePreventiveBean.onFlowProcessSaveMaintenance}" id="wizardSave" widgetVar="wizardSave" 
                               backLabel="Atras" nextLabel="Siguiente">
                        <p:tab title="Datos Generales" id="tabGeneral" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para los datos básicos de mantenimientos preventivos">
                            <p:panel header="Datos Básicos" >
                                <table width="98%" cellspacing="10" >
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfNameMaintenance" value="Nombre Mantenimiento*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputText    id="tfNameMaintenance"  value="#{OtmaintenancePreventiveBean.orderSave.name}"
                                                            readonly="true">
                                            <p:tooltip for="tfNameMaintenance"   value="#{OtmaintenancePreventiveBean.orderSave.name}" />
                                            </p:inputText>

                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfDescription" value="Descripción"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputTextarea    id="tfDescription"  value="#{OtmaintenancePreventiveBean.orderSave.description}"
                                                            />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="cbMachine" value="Máquina*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:selectOneMenu id="cbMachine"  value="#{OtmaintenancePreventiveBean.machineSave}" 
                                                             style="width: 100px; top: 6px;"
                                                             effect="puff" converter="machineConverter"
                                                             height="140">
                                                <f:selectItem itemLabel="..."/>
                                                <f:selectItems value="#{OtmaintenancePreventiveBean.listMachines}" var="machine" itemLabel="#{machine.name} - #{machine.mark} - #{machine.serie}"/>
                                                <p:ajax event="change" listener="#{OtmaintenancePreventiveBean.fillListMachinePart(OtmaintenancePreventiveBean.machineSave, OtmaintenancePreventiveBean.orderSave, 0)}" update="cbMachinePart,tfNameMaintenance"/>
                                            </p:selectOneMenu>                                                
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="cbMachinePart" value="Parte de Máquina*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:selectOneMenu id="cbMachinePart"  value="#{OtmaintenancePreventiveBean.orderSave.idMaintenance.idMachinePart}" 
                                                             style="width: 100px; top: 6px;"
                                                             effect="puff" disabled="#{OtmaintenancePreventiveBean.isComboDisable(OtmaintenancePreventiveBean.machineSave)}"
                                                             height="140" converter="machinePartConverter"
                                                             >
                                                <f:selectItem itemLabel="..."/>
                                                <f:selectItems value="#{OtmaintenancePreventiveBean.listMachineParts}" var="machinePart" itemLabel="#{machinePart.name} - #{machinePart.mark} - #{machinePart.serie}"/>
                                                <p:ajax event="change" listener="#{OtmaintenancePreventiveBean.addPartMachineToName(OtmaintenancePreventiveBean.orderSave.idMaintenance.idMachinePart, OtmaintenancePreventiveBean.orderSave)}" update="tfNameMaintenance"/>
                                            </p:selectOneMenu>                                                
                                        </td>
                                    </tr> 
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="cbClasification" value="Clasificación*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:selectOneMenu id="cbClasification"  value="#{OtmaintenancePreventiveBean.orderSave.idMaintenance.idMaintenanceClasification}" 
                                                             style="width: 100px; top: 6px;"
                                                             effect="puff" converter="maintenanceClasificationConverter"
                                                             height="140">
                                                <f:selectItem itemLabel="..."/>
                                                <f:selectItems value="#{OtmaintenancePreventiveBean.listClasifications}" var="clasification" 
                                                               itemLabel="#{clasification.clasification}"/>
                                                
                                            </p:selectOneMenu>                                                
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="cbPrority" value="Prioridad*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:selectOneMenu id="cbPrority"  value="#{OtmaintenancePreventiveBean.orderSave.idMaintenance.idPriority}" 
                                                             style="width: 100px; top: 6px;"
                                                             effect="puff" converter="priorityConverter"
                                                             height="140">
                                                <f:selectItem itemLabel="..."/>
                                                <f:selectItems value="#{OtmaintenancePreventiveBean.listPriority}" var="priority" 
                                                               itemLabel="#{priority.name}"/>
                                            </p:selectOneMenu> 
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="cbDamage" value="Daño*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:selectOneMenu id="cbDamage"  value="#{OtmaintenancePreventiveBean.orderSave.idMaintenance.idMaintenanceDamage}" 
                                                             style="width: 100px; top: 6px;"
                                                             effect="puff" converter="damageConverter"
                                                             height="140">
                                                <f:selectItem itemLabel="..."/>
                                                <f:selectItems value="#{OtmaintenancePreventiveBean.listDamage}" var="damage" 
                                                               itemLabel="#{damage.damage}"/>
                                                
                                            </p:selectOneMenu>                                                
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfDamage" value="Descripción del Daño"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputTextarea    id="tfDamage"  value="#{OtmaintenancePreventiveBean.orderSave.idMaintenance.descriptionDamage}"
                                                            />
                                        </td>
                                    </tr>
                                    
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfBeginDate" value="Fecha de Programación*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:calendar value="#{OtmaintenancePreventiveBean.orderSave.idMaintenance.creationDate}" autocomplete="true" effect="explode" id="tfBeginDate" pattern="dd-MM-yyyy" 
                                                        title="Debe ingresar la fecha de programación del mantenimiento" mask="true" 
                                                        mindate="#{OtmaintenanceCorrectiveBean.getFormatDateGlobal('dd-MM-yyyy', OtmaintenancePreventiveBean.orderSave.idMaintenance.creationDate)}">
                                                        <p:ajax listener="#{OtmaintenancePreventiveBean.addTime(OtmaintenancePreventiveBean.orderSave, 0)}" update="tfEndHour" process="@form" event="dateSelect"/>
                                                        
                                            </p:calendar>
                                            <p:tooltip for="tfBeginDate" value="Debe ingresar la fecha de programació del mantenimiento"/>
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfStartHour" value="Hora de Inicio*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:spinner    id="tfStartHour"  value="#{OtmaintenancePreventiveBean.startHour}" min="0" max="23"
                                                          size="2"> 
                                                <p:ajax event="change" update="tfEndHour" process="@form"
                                                        listener="#{OtmaintenancePreventiveBean.addTime(OtmaintenancePreventiveBean.orderSave, 0)}"/>
                                            </p:spinner>
                                            <p:spacer width="5"/>
                                            <p:outputLabel  value="Horas"/>
                                            <p:spacer width="20"/>
                                            <p:spinner    id="tfStartMinutes"  value="#{OtmaintenancePreventiveBean.startMinutes}" min="0" max="59  "
                                                          size="2">
                                                <p:ajax event="change" update="tfEndHour" process="@form"
                                                        listener="#{OtmaintenancePreventiveBean.addTime(OtmaintenancePreventiveBean.orderSave, 0)}"/>
                                                
                                            </p:spinner>
                                            <p:spacer width="5"/>
                                            <p:outputLabel  value="Minutos"/>

                                        </td>
                                        
                                    </tr>
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfEndHour" value="Fecha de Finalización*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputText  readonly="true"  id="tfEndHour"  
                                            value="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy HH:mm:ss', OtmaintenancePreventiveBean.endDate)}"/>
                                            <p:tooltip for="tfEndHour" value="La Fecha de Finalización se calcula con base a la hora de inicio y la duracción del mantenimiento"/>
                                        </td>
                                        <td width="10%" align="right">
                                           <p:outputLabel  for="cbFrequency" value="Frecuencia*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:selectOneMenu id="cbFrequency"  value="#{OtmaintenancePreventiveBean.orderSave.typeFrecuency}" 
                                                             style="width: 100px; top: 6px;"
                                                             effect="puff"
                                                             height="140">
                                                <f:selectItem itemLabel="..."/>
                                                <f:selectItem itemLabel="Diaria" itemValue="DAILY"/>
                                                <f:selectItem itemLabel="Semanal" itemValue="WEEKLY"/>
                                                <f:selectItem itemLabel="Mensual" itemValue="MONTHLY"/>
                                                <f:selectItem itemLabel="Trimestral" itemValue="QUARTELY"/>
                                                <f:selectItem itemLabel="Semestral" itemValue="BIANNUAL"/>
                                                <f:selectItem itemLabel="Anual" itemValue="ANNUAL"/>
                                                <p:ajax event="change" update="dataTableSchuduler" listener="#{OtmaintenancePreventiveBean.maintenanceScheduler(OtmaintenancePreventiveBean.orderSave)}"/>
                                            </p:selectOneMenu>
                                            <p:spacer width="10"/>
                                            <p:spinner id="amountScheduler" value="#{OtmaintenancePreventiveBean.orderSave.amountSchedule}" min="1" max="20"
                                                       maxlength="2" size="2">
                                                <p:ajax event="change" update="dataTableSchuduler" listener="#{OtmaintenancePreventiveBean.maintenanceScheduler(OtmaintenancePreventiveBean.orderSave)}"/>
                                            </p:spinner>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel   value="Duración*"/>
                                        </td> 
                                        
                                        <td width="90%" align="left" colspan="3" >
                                            <p:spinner id="minutes" value="#{OtmaintenancePreventiveBean.minutes}" min="0" max="59"
                                                       maxlength="2" size="2">
                                                <p:ajax event="change" update="tfEndHour" process="@form"
                                                        listener="#{OtmaintenancePreventiveBean.addTime(OtmaintenancePreventiveBean.orderSave, 0)}"/>
                                            </p:spinner>
                                            <p:spacer width="5"/>
                                            <p:outputLabel   value="Minutos"/>
                                            <p:spacer width="20"/>
                                            <p:spinner id="hours" value="#{OtmaintenancePreventiveBean.hours}"  min="0" max="23"
                                                       maxlength="2" size="2">
                                                <p:ajax event="change" update="tfEndHour" process="@form"
                                                        listener="#{OtmaintenancePreventiveBean.addTime(OtmaintenancePreventiveBean.orderSave, 0)}"/>
                                            </p:spinner>
                                            <p:spacer width="5"/>
                                            <p:outputLabel   value="Horas"/>
                                            <p:spacer width="20"/>
                                            <p:spinner id="days" value="#{OtmaintenancePreventiveBean.days}" min="0" max="30"
                                                       maxlength="2" size="2">
                                                <p:ajax event="change" update="tfEndHour" process="@form"
                                                        listener="#{OtmaintenancePreventiveBean.addTime(OtmaintenancePreventiveBean.orderSave, 0)}"/>
                                            </p:spinner>
                                            <p:spacer width="5"/>
                                            <p:outputLabel   value="Días"/>
                                            <p:spacer width="20"/>
                                            <p:spinner id="months" value="#{OtmaintenancePreventiveBean.months}"  min="0" max="12"
                                                       maxlength="2" size="2">
                                            <p:ajax event="change" update="tfEndHour" process="@form"
                                                        listener="#{OtmaintenancePreventiveBean.addTime(OtmaintenancePreventiveBean.orderSave, 0)}"/>
                                            </p:spinner>
                                            <p:spacer width="5"/>
                                            <p:outputLabel   value="Meses"/>
                                        </td>
                                    </tr>
                                </table>
                            </p:panel>
                        </p:tab> 
                        <p:tab title="Mantenimientos" id="tabMtos" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para los mantenimientos programdos con la frecuencia">
                            <p:panel header="Fechas Programadas" >
                                <table width="50%" cellspacing="10" >
                                    <tr>
                                        <td>
                                            <p:dataTable id="dataTableSchuduler"
                                                         var="scheduler" 
                                                         value="#{OtmaintenancePreventiveBean.listNextDates}"
                                                         rowKey="#{scheduler.time}"
                                                         paginator="true" rows="10"  
                                                         pageLinks="40"
                                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                                                         {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         liveResize="true" rowsPerPageTemplate="15,30,50"
                                                         paginatorPosition="top"
                                                         sortBy="#{scheduler.time}">
                                                
                                                <p:column  headerText="No. Programación" sortBy="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy HH:mm:ss',scheduler)}">
                                                <center>
                                                    <p:outputLabel value="#{(OtmaintenancePreventiveBean.listNextDates.indexOf(scheduler))+1}"/>
                                                </center>
                                                </p:column>
                                                
                                                <p:column  headerText="Fecha" sortBy="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy HH:mm:ss',scheduler)}">
                                                <center>
                                                    <p:outputLabel value="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy HH:mm:ss',scheduler)}" id="outDates"/>
                                                    <p:tooltip value="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy HH:mm:ss',scheduler)}" for="outDates"/>
                                                    </center>
                                                </p:column>
                                                
                                            </p:dataTable>
                                        </td>
                                    </tr>
                                </table>
                            </p:panel>
                        </p:tab>
                        <p:tab title="Actividades" id="tabActivities" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para asignar las actividades del mantenimiento">
                            <p:panel header="Actividades del Mantenimiento" >
                                <table width="98%" cellspacing="10" >
                                    <tr>
                                        <td width="40%">
                                            <table width="100%" cellspacing="10">
                                                <tr>
                                                    <td width="40%" >
                                                        <p:outputLabel for="tfTitleActivity" value="Nombre de la Actividad*"/>
                                                    </td>
                                                    <td width="60%">
                                                        <p:inputText id="tfTitleActivity" value="#{OtmaintenancePreventiveBean.activitySave.name}"/>
                                                        <p:tooltip for="tfTitleActivity" value="Ingrese el título la actividad a realizar"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td width="40%">
                                                        <p:outputLabel for="tfDescriptionActivity" value="Descripción"/>
                                                    </td>
                                                    <td width="60%">
                                                        <p:inputTextarea id="tfDescriptionActivity" value="#{OtmaintenancePreventiveBean.activitySave.description}"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2">
                                                        <center>
                                                            <p:commandButton value="Guardar" update="tfTitleActivity,tfDescriptionActivity,dataTableActivitys"
                                                                             actionListener="#{OtmaintenancePreventiveBean.saveActivity(OtmaintenancePreventiveBean.orderSave.idMaintenance.scMaintenanceActivityList,
                                                                                               OtmaintenancePreventiveBean.activitySave, OtmaintenancePreventiveBean.orderSave.idMaintenance)}"/>
                                                        </center>
                                                    </td>
                                                </tr>

                                            </table>
                                        </td>
                                        <td width="60%" align="center" valign="top">
                                            <p:dataTable id="dataTableActivitys"
                                                         var="activity" 
                                                         value="#{OtmaintenancePreventiveBean.orderSave.idMaintenance.scMaintenanceActivityList}"
                                                         rowKey="#{activity.name}"
                                                         paginator="true" rows="10"  
                                                         pageLinks="40"
                                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                                                         {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         liveResize="true" rowsPerPageTemplate="15,30,50"
                                                         paginatorPosition="top"
                                                         sortBy="#{activity.name}">
                                                <p:column  style="width:32px">
                                                    <p:commandButton icon="ui-icon-close" update="dataTableActivitys" title="Eliminar Actividades"
                                                                     process="dataTableActivitys" 
                                                                     actionListener="#{OtmaintenancePreventiveBean.deleteActivity(OtmaintenancePreventiveBean.orderSave.idMaintenance.scMaintenanceActivityList, activity)}" >
                                                    </p:commandButton>
                                                </p:column>
                                                <p:column  headerText="Actividad" sortBy="#{activity.name}">
                                                    <p:outputLabel value="#{activity.name}" id="outTittle"/>
                                                    <p:tooltip value="#{activity.name}" for="outTittle"/>
                                                </p:column>
                                                <p:column  headerText="Descripción" sortBy="#{activity.description}">
                                                    <p:outputLabel value="#{activity.description}" id="outDescription"/>
                                                    <p:tooltip value="#{activity.description}" for="outDescription"/>
                                                </p:column>
                                            </p:dataTable>
                                        </td>
                                    </tr>
                                </table>
                            </p:panel>
                        </p:tab> 
                        <p:tab title="Mano de Obra" id="tabEmployees" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para asignar la mano de obra">
                            <p:panel header="Mano de Obra y Empleado" >
                                <table width="98%" cellspacing="10" >
                                    <tr>
                                        <td width="10%" >
                                            <p:outputLabel for="cbWorkForceType" value="Tipo de Mano de Obra"/>
                                        </td>
                                        <td width="40%">
                                            <p:selectOneMenu id="cbWorkForceType"  value="#{OtmaintenancePreventiveBean.orderSave.idMaintenance.idWorkforce.typeWorkforce}" 
                                                             style="width: 100px; top: 6px;"
                                                             effect="puff" required="true" requiredMessage="Error en el Campo Tipo de  Mano de Obra,
                                                             Debe ingresar el tipo de la mano de obra"
                                                             height="140">
                                                <f:selectItem itemLabel="..."/>
                                                <f:selectItem itemLabel="Eléctrico" itemValue="Eléctrico"/>
                                                <f:selectItem itemLabel="Mecánico" itemValue="Mecánico"/>
                                                <f:selectItem itemLabel="Electrónico" itemValue="Electrónico"/>
                                                <f:selectItem itemLabel="Hidráulico" itemValue="Hidráulico"/>
                                                <f:selectItem itemLabel="Eléctrico" itemValue="Eléctrico"/>
                                            </p:selectOneMenu>
                                        </td>
                                        <td width="10%" >
                                            <p:outputLabel for="tfWorkForce" value="Descripción Mano de Obra"/>
                                        </td>
                                        <td width="40%">
                                            <p:inputTextarea id="tfWorkForce" 
                                                             value="#{OtmaintenancePreventiveBean.orderSave.idMaintenance.idWorkforce.workforce}"/>
                                            <p:tooltip for="tfWorkForce" value="Ingrese la descripción de  la mano de obra a realizar"/>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td width="60%" align="center" valign="top" colspan="4">
                                            <p:dataTable id="dataTableEmployees" 
                                                         var="employees" 
                                                         value="#{OtmaintenancePreventiveBean.employeesList}"
                                                         rowKey="#{employees.idEmployee}"
                                                         paginator="true" rows="10"  
                                                         pageLinks="40"
                                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                                                         {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         liveResize="true" rowsPerPageTemplate="15,30,50"
                                                         paginatorPosition="top"
                                                         selectionMode="single"
                                                         selection="#{OtmaintenancePreventiveBean.orderSave.idMaintenance.idWorkforce.idEmployee}"
                                                         sortBy="#{employees.nameEmployee}">
                                                
                                                <p:ajax event="rowSelect" update="dataTableEmployees"/>
                                                <p:column selectionMode="single" width="15">
                                                    
                                                </p:column>
                                                <p:column  headerText="Empleado" sortBy="#{employees.nameEmployee}">
                                                    <p:outputLabel value="#{employees.nameEmployee}" id="outTittle"/>
                                                    <p:tooltip value="#{employees.nameEmployee}" for="outTittle"/>
                                                </p:column>
                                                <p:column  headerText="Cargo" sortBy="#{employees.position}">
                                                    <p:outputLabel value="#{employees.position}" id="outDescription"/>
                                                    <p:tooltip value="#{employees.position}" for="outDescription"/>
                                                </p:column>
                                            </p:dataTable>
                                        </td>
                                    </tr>
                                </table>
                                
                            </p:panel>
                        </p:tab> 
                        <p:tab title="Confirmar" id="tabConfirm" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para confirmar los datos de la orden de mantenimiento a guardar">
                            <p:panel header="Datos Básicos" >
                                <table width="98%" cellspacing="10" >
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel   value="Nombre Mantenimiento"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel   value="#{OtmaintenancePreventiveBean.orderSave.name}"
                                                            />

                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel   value="Descripción"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel     value="#{OtmaintenancePreventiveBean.orderSave.description}"
                                                            />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel   value="Máquina"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel 
                                            value="#{OtmaintenancePreventiveBean.machineSave.name}" />
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  value="Parte de Máquina"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel  
                                            value="#{OtmaintenancePreventiveBean.orderSave.idMaintenance.idMachinePart.name}"/>
                                        </td>
                                    </tr> 
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel value="Clasificación"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel value="#{OtmaintenancePreventiveBean.orderSave.idMaintenance.idMaintenanceClasification.clasification}" 
                                                           />
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  value="Prioridad"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel  value="#{OtmaintenancePreventiveBean.orderSave.idMaintenance.idPriority.name}" 
                                                             />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  value="Daño*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel value="#{OtmaintenancePreventiveBean.orderSave.idMaintenance.idMaintenanceDamage.damage}" 
                                                             />
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  value="Empleado"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel value="#{OtmaintenancePreventiveBean.orderSave.idMaintenance.idWorkforce.idEmployee.nameEmployee}"
                                                            />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel   value="Duración"/>
                                        </td> 
                                        
                                        <td width="90%" align="left" colspan="3" >
                                            <p:outputLabel  value="#{OtmaintenancePreventiveBean.minutes}" />
                                            <p:spacer width="5"/>
                                            <p:outputLabel   value="Minutos"/>
                                            <p:spacer width="20"/>
                                            <p:outputLabel value="#{OtmaintenancePreventiveBean.hours}" />
                                            <p:spacer width="5"/>
                                            <p:outputLabel   value="Horas"/>
                                            <p:spacer width="20"/>
                                            <p:outputLabel  value="#{OtmaintenancePreventiveBean.days}"/>
                                            <p:spacer width="5"/>
                                            <p:outputLabel   value="Días"/>
                                            <p:spacer width="20"/>
                                            <p:outputLabel value="#{OtmaintenancePreventiveBean.months}" />
                                            <p:spacer width="5"/>
                                            <p:outputLabel   value="Meses"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  value="Fecha de Inicio*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel   
                                            value="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy HH:mm:ss', OtmaintenancePreventiveBean.orderSave.idMaintenance.creationDate)}"/>
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  value="Fecha de Finalización"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel  
                                            value="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy HH:mm:ss', OtmaintenancePreventiveBean.endDate)}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="98%" align="right" colspan="4">
                                            <p:commandButton id="btnSaveMaintenance" value="Guardar Mantenimiento" 
                                                             actionListener="#{OtmaintenancePreventiveBean.saveMaintenance()}" update=":formPreventive:otDataTablePreventive,:formWizarMaintenanceSave"
                                                             oncomplete="PF('wizardSave').loadStep('tabGeneral', false);PF('dialogMaintenance').hide();"/>
                                            <p:spacer width="30"/>
                                            <p:commandButton id="btnCancelMaintenance" value="Cancelar" oncomplete="PF('dialogMaintenance').hide();PF('wizardSave').loadStep('tabGeneral', false)"
                                                             actionListener="#{OtmaintenancePreventiveBean.cleanValues()}" update=":formPreventive:otDataTablePreventive,:formWizarMaintenanceSave"
                                                             />
                                        </td>
                                    </tr>
                                </table>
                            </p:panel>
                        </p:tab> 
                    </p:wizard>
                </h:form>
                
            </p:dialog>
            <!--         finaliza el dialogo para guardar mantenimientos               -->
            
                              <!--         Dialogo para visualizar nuevos mantenimientos         -->
            <p:dialog id="dialogMaintenanceView" widgetVar="dialogMaintenanceView" draggable="true" 
                      closable="true"  header="Visualizar Mantenimientos Preventivos" position="center top" width="800"
                      hideEffect="explode" modal="true" showEffect="explode" resizable="true">

                <h:form id="formWizarMaintenanceView" >
                    <p:tabView  activeIndex="0"  dynamic="true" id="tabViewMaintenance">
                        <p:tab title="Datos Generales" id="tabGeneral" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para los datos básicos de mantenimientos preventivos">
                            <p:panel header="Datos Básicos" >
                                <table width="98%" cellspacing="10" >
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfNameMaintenance" value="Nombre Mantenimiento*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputText    id="tfNameMaintenance"  value="#{OtmaintenancePreventiveBean.orderSelected.name}"
                                                            readonly="true">
                                            <p:tooltip for="tfNameMaintenance"   value="#{OtmaintenancePreventiveBean.orderSelected.name}" />
                                            </p:inputText>

                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfDescription" value="Descripción"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputTextarea    id="tfDescription"  value="#{OtmaintenancePreventiveBean.orderSelected.description}"
                                                                readonly="true"      />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="cbMachine" value="Máquina*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputText id="cbMachine"  value="#{OtmaintenancePreventiveBean.orderSelected.idMaintenance.idMachinePart.idMachine.name}" 
                                                         readonly="true" />
                                                                                          
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="cbMachinePart" value="Parte de Máquina*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputText id="cbMachinePart"  value="#{OtmaintenancePreventiveBean.orderSelected.idMaintenance.idMachinePart.name}" 
                                                         readonly="true"/>
                                                                                     
                                        </td>
                                    </tr> 
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="cbClasification" value="Clasificación*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputText id="cbClasification"  value="#{OtmaintenancePreventiveBean.orderSelected.idMaintenance.idMaintenanceClasification.clasification}" 
                                                         readonly="true"
                                                />                                                
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="cbPrority" value="Prioridad*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputText id="cbPrority"  value="#{OtmaintenancePreventiveBean.orderSelected.idMaintenance.idPriority.name}" 
                                                         readonly="true"                 />
                                            
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="cbDamage" value="Daño*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputText id="cbDamage"  value="#{OtmaintenancePreventiveBean.orderSelected.idMaintenance.idMaintenanceDamage.damage}" 
                                                         readonly="true"/>
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfDamage" value="Descripción del Daño"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputTextarea    id="tfDamage"  value="#{OtmaintenancePreventiveBean.orderSelected.idMaintenance.descriptionDamage}"
                                                                readonly="true"     />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfStartHour" value="Fecha de Inicio*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputText  readonly="true"  id="tfStartHour" 
                                                          value="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy HH:mm:ss', OtmaintenancePreventiveBean.orderSelected.idMaintenance.creationDate)}"/>
                                            
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfEndHour" value="Fecha de Finalización*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputText  readonly="true"  id="tfEndHour"
                                                          value="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy HH:mm:ss', OtmaintenancePreventiveBean.orderSelected.idMaintenance.endDate)}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfFrequency" value="Frecuencia*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputText  readonly="true"  id="tfFrequency" 
                                                          value="#{OtmaintenancePreventiveBean.orderSelected.typeFrecuency}"/>
                                            
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfAmountSchedule" value="Cantidad*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputText  readonly="true"  id="tfAmountSchedule"
                                                          value="#{OtmaintenancePreventiveBean.orderSelected.amountSchedule}"/>
                                        </td>
                                    </tr>
                                </table> 
                            </p:panel>
                        </p:tab> 
                        <p:tab title="Mantenimientos" id="tabMtos" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para los mantenimientos programdos con la frecuencia">
                            <p:panel header="Fechas Programadas" >
                                <table width="50%" cellspacing="10" >
                                    <tr>
                                        <td>
                                            <p:dataTable id="dataTableSchuduler"
                                                         var="scheduler" 
                                                         value="#{OtmaintenancePreventiveBean.listNextDates}"
                                                         rowKey="#{scheduler.time}"
                                                         paginator="true" rows="10"  
                                                         pageLinks="40"
                                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                                                         {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         liveResize="true" rowsPerPageTemplate="15,30,50"
                                                         paginatorPosition="top"
                                                         sortBy="#{scheduler.time}">
                                                
                                                <p:column  headerText="No. Programación" sortBy="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy HH:mm:ss',scheduler)}">
                                                <center>
                                                    <p:outputLabel value="#{(OtmaintenancePreventiveBean.listNextDates.indexOf(scheduler))+1}"/>
                                                </center>
                                                </p:column>
                                                
                                                <p:column  headerText="Fecha" sortBy="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy HH:mm:ss',scheduler)}">
                                                <center>
                                                    <p:outputLabel value="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy HH:mm:ss',scheduler)}" id="outDates"/>
                                                    <p:tooltip value="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy HH:mm:ss',scheduler)}" for="outDates"/>
                                                    </center>
                                                </p:column>
                                                
                                            </p:dataTable>
                                        </td>
                                    </tr>
                                </table>
                            </p:panel>
                        </p:tab>
                        <p:tab title="Actividades" id="tabActivities" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para asignar las actividades del mantenimiento">
                            <p:panel header="Actividades del Mantenimiento" >
                                <table width="98%" cellspacing="10" >
                                    <tr>
                                        <td align="center" valign="top">
                                            <p:dataTable id="dataTableActivitys"
                                                         var="activity" 
                                                         value="#{OtmaintenancePreventiveBean.orderSelected.idMaintenance.scMaintenanceActivityList}"
                                                         rowKey="#{activity.name}"
                                                         paginator="true" rows="10"  
                                                         pageLinks="40"
                                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                                                         {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         liveResize="true" rowsPerPageTemplate="15,30,50"
                                                         paginatorPosition="top"
                                                         sortBy="#{activity.name}">
                                                <p:column  headerText="Actividad" sortBy="#{activity.name}">
                                                    <p:outputLabel value="#{activity.name}" id="outTittle"/>
                                                    <p:tooltip value="#{activity.name}" for="outTittle"/>
                                                </p:column>
                                                <p:column  headerText="Descripción" sortBy="#{activity.description}">
                                                    <p:outputLabel value="#{activity.description}" id="outDescription"/>
                                                    <p:tooltip value="#{activity.description}" for="outDescription"/>
                                                </p:column>
                                            </p:dataTable>
                                        </td>
                                    </tr>
                                </table>
                            </p:panel>
                        </p:tab> 
                        <p:tab title="Mano de Obra" id="tabEmployees" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para asignar la mano de obra">
                            <p:panel header="Mano de Obra y Empleado" >
                                <table width="98%" cellspacing="10" >
                                    <tr>
                                        <td width="10%" >
                                            <p:outputLabel for="cbWorkForceType" value="Tipo de Mano de Obra"/>
                                        </td>
                                        <td width="40%">
                                            <p:inputText id="cbWorkForceType"  value="#{OtmaintenancePreventiveBean.orderSelected.idMaintenance.idWorkforce.typeWorkforce}" 
                                                         readonly="true"   />
                                        </td>
                                        <td width="10%" >
                                            <p:outputLabel for="tfWorkForce" value="Descripción Mano de Obra"/>
                                        </td>
                                        <td width="40%">
                                            <p:inputTextarea id="tfWorkForce" readonly="true"
                                                             value="#{OtmaintenancePreventiveBean.orderSelected.idMaintenance.idWorkforce.workforce}"/>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td width="10%" >
                                            <p:outputLabel for="cbWorkForceEmployee" value="Empleado"/>
                                        </td>
                                        <td width="40%">
                                            <p:inputText id="cbWorkForceEmployee"  value="#{OtmaintenancePreventiveBean.orderSelected.idMaintenance.idWorkforce.idEmployee.nameEmployee}" 
                                                         readonly="true"   />
                                        </td>
                                        <td width="10%" >
                                            <p:outputLabel for="tfWorkForcePosition" value="Cargo"/>
                                        </td>
                                        <td width="40%">
                                            <p:inputText id="tfWorkForcePosition" readonly="true"
                                                             value="#{OtmaintenancePreventiveBean.orderSelected.idMaintenance.idWorkforce.idEmployee.position}"/>
                                        </td>
                                    </tr>
                                </table>
                                
                            </p:panel>
                        </p:tab>
                    </p:tabView>
                </h:form>
                
            </p:dialog>
            <!--         finaliza el dialogo para visualizar mantenimientos               -->
            
            <!--             inicia el dialogo para eliminar mantenimientos           -->
            <p:dialog id="dialogMaintenanceDelete" widgetVar="dialogMaintenanceDelete" position="center top" 
                      closable="true" draggable="true" dynamic="true" header="Eliminar Mantenimientos Preventivos"
                      hideEffect="explode" modal="true" showEffect="explode" resizable="false">
                <h:form id="formWizarMaintenanceDelete">
                    <table width="100%" cellspacing="30" style="padding: 0px; margin: 0px;">
                        <tr>
                            <td>
                                <p:outputLabel value="¿Desea eliminar el mantenimiento
                                               #{OtmaintenancePreventiveBean.orderSelected.name}?" />
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2" align="center">
                                <p:commandButton value="Eliminar" actionListener="#{OtmaintenancePreventiveBean.deleteMaintenance()}"  
                                                 onsuccess="PF('dialogMaintenanceDelete').hide()"
                                                 update="@this,:formPreventive:otDataTablePreventive"/>
                                <p:spacer width="20"/>

                                <p:commandButton value="Cancelar" oncomplete="PF('dialogMaintenanceDelete').hide()"
                                                 update="@this,:formPreventive:otDataTablePreventive" actionListener="#{OtmaintenancePreventiveBean.cleanValues()}" />
                            </td>
                        </tr>
                    </table>
                </h:form>

            </p:dialog>
            <!--            finaliza el dialogo para eliminar mantenimientos            -->
            
            
            
            
                             <!--         Dialogo para actualizar 	mantenimientos         -->
            <p:dialog id="dialogMaintenanceUpdate" widgetVar="dialogMaintenanceUpdate" draggable="true" 
                      closable="true"  header="Actualizar Mantenimientos Preventivos" position="center top" width="800"
                      hideEffect="explode" modal="true" showEffect="explode" resizable="true">

                <h:form id="formWizarMaintenanceUpdate" >

                    <p:wizard  flowListener="#{OtmaintenancePreventiveBean.onFlowProcessUpdateMaintenance}" id="wizardUpdate" widgetVar="wizardUpdate" 
                               backLabel="Atras" nextLabel="Siguiente">
                        <p:tab title="Datos Generales" id="tabGeneral" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para los datos básicos de mantenimientos preventivos">
                            <p:panel header="Datos Básicos" >
                                <table width="98%" cellspacing="10" >
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfNameMaintenance" value="Nombre Mantenimiento*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputText    id="tfNameMaintenance"  value="#{OtmaintenancePreventiveBean.orderUpdate.name}"
                                                            readonly="true">
                                            <p:tooltip for="tfNameMaintenance"   value="#{OtmaintenancePreventiveBean.orderUpdate.name}" />
                                            </p:inputText>

                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfDescription" value="Descripción"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputTextarea    id="tfDescription"  value="#{OtmaintenancePreventiveBean.orderUpdate.description}"
                                                            />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="cbMachine" value="Máquina*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:selectOneMenu id="cbMachine"  value="#{OtmaintenancePreventiveBean.machineUpdate}" 
                                                             style="width: 100px; top: 6px;"
                                                             effect="puff" converter="machineConverter"
                                                             height="140">
                                                <f:selectItem itemLabel="..."/>
                                                <f:selectItems value="#{OtmaintenancePreventiveBean.listMachines}" var="machine" itemLabel="#{machine.name} - #{machine.mark} - #{machine.serie}"/>
                                                <p:ajax event="change" listener="#{OtmaintenancePreventiveBean.fillListMachinePart(OtmaintenancePreventiveBean.machineUpdate, OtmaintenancePreventiveBean.orderUpdate, 0)}" update="cbMachinePart,tfNameMaintenance"/>
                                            </p:selectOneMenu>                                                
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="cbMachinePart" value="Parte de Máquina*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:selectOneMenu id="cbMachinePart"  value="#{OtmaintenancePreventiveBean.orderUpdate.idMaintenance.idMachinePart}" 
                                                             style="width: 100px; top: 6px;"
                                                             effect="puff" disabled="#{OtmaintenancePreventiveBean.isComboDisable(OtmaintenancePreventiveBean.machineUpdate)}"
                                                             height="140" converter="machinePartConverter"
                                                             >
                                                <f:selectItem itemLabel="..."/>
                                                <f:selectItems value="#{OtmaintenancePreventiveBean.listMachineParts}" var="machinePart" itemLabel="#{machinePart.name} - #{machinePart.mark} - #{machinePart.serie}"/>
                                                <p:ajax event="change" listener="#{OtmaintenancePreventiveBean.addPartMachineToName(OtmaintenancePreventiveBean.orderUpdate.idMaintenance.idMachinePart, OtmaintenancePreventiveBean.orderUpdate)}" update="tfNameMaintenance"/>
                                            </p:selectOneMenu>                                                
                                        </td>
                                    </tr> 
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="cbClasification" value="Clasificación*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:selectOneMenu id="cbClasification"  value="#{OtmaintenancePreventiveBean.orderUpdate.idMaintenance.idMaintenanceClasification}" 
                                                             style="width: 100px; top: 6px;"
                                                             effect="puff" converter="maintenanceClasificationConverter"
                                                             height="140">
                                                <f:selectItem itemLabel="..."/>
                                                <f:selectItems value="#{OtmaintenancePreventiveBean.listClasifications}" var="clasification" 
                                                               itemLabel="#{clasification.clasification}"/>
                                                
                                            </p:selectOneMenu>                                                
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="cbPrority" value="Prioridad*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:selectOneMenu id="cbPrority"  value="#{OtmaintenancePreventiveBean.orderUpdate.idMaintenance.idPriority}" 
                                                             style="width: 100px; top: 6px;"
                                                             effect="puff" converter="priorityConverter"
                                                             height="140">
                                                <f:selectItem itemLabel="..."/>
                                                <f:selectItems value="#{OtmaintenancePreventiveBean.listPriority}" var="priority" 
                                                               itemLabel="#{priority.name}"/>
                                            </p:selectOneMenu> 
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="cbDamage" value="Daño*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:selectOneMenu id="cbDamage"  value="#{OtmaintenancePreventiveBean.orderUpdate.idMaintenance.idMaintenanceDamage}" 
                                                             style="width: 100px; top: 6px;"
                                                             effect="puff" converter="damageConverter"
                                                             height="140">
                                                <f:selectItem itemLabel="..."/>
                                                <f:selectItems value="#{OtmaintenancePreventiveBean.listDamage}" var="damage" 
                                                               itemLabel="#{damage.damage}"/>
                                                
                                            </p:selectOneMenu>                                                
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfDamage" value="Descripción del Daño"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputTextarea    id="tfDamage"  value="#{OtmaintenancePreventiveBean.orderUpdate.idMaintenance.descriptionDamage}"
                                                            />
                                        </td>
                                    </tr>
                                    
                                    <tr>
                                        
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfBeginDate" value="Fecha de Programación*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:calendar value="#{OtmaintenancePreventiveBean.orderUpdate.idMaintenance.creationDate}" autocomplete="true" effect="explode" id="tfBeginDate" pattern="dd-MM-yyyy" 
                                                        title="Debe ingresar la fecha de programació del mantenimiento" mask="true" 
                                                        mindate="#{OtmaintenanceCorrectiveBean.getFormatDateGlobal('dd-MM-yyyy', OtmaintenancePreventiveBean.orderUpdate.idMaintenance.creationDate)}">
                                                        <p:ajax listener="#{OtmaintenancePreventiveBean.addTime(OtmaintenancePreventiveBean.orderUpdate, 1)}" update="tfEndHour" process="@form" event="dateSelect"/>
                                                        
                                            </p:calendar>
                                            <p:tooltip for="tfBeginDate" value="Debe ingresar la fecha de programació del mantenimiento"/>
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfStartHour" value="Hora de Inicio*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:spinner    id="tfStartHour"  value="#{OtmaintenancePreventiveBean.startHour}" min="0" max="23"
                                                          size="2"> 
                                                <p:ajax event="change" update="tfEndHour" process="@form"
                                                        listener="#{OtmaintenancePreventiveBean.addTime(OtmaintenancePreventiveBean.orderUpdate, 1)}"/>
                                            </p:spinner>
                                            <p:spacer width="5"/>
                                            <p:outputLabel  value="Horas"/>
                                            <p:spacer width="20"/>
                                            <p:spinner    id="tfStartMinutes"  value="#{OtmaintenancePreventiveBean.startMinutes}" min="0" max="59  "
                                                          size="2">
                                                <p:ajax event="change" update="tfEndHour" process="@form"
                                                        listener="#{OtmaintenancePreventiveBean.addTime(OtmaintenancePreventiveBean.orderUpdate, 1)}"/>
                                            </p:spinner>
                                            <p:spacer width="5"/>
                                            <p:outputLabel  value="Minutos"/>

                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfEndHour" value="Fecha de Finalización*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputText  readonly="true"  id="tfEndHour"  
                                            value="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy HH:mm:ss', OtmaintenancePreventiveBean.endDate)}"/>
                                            <p:tooltip for="tfEndHour" value="La Fecha de Finalización se calcula con base a la hora de inicio y la duracción del mantenimiento"/>
                                        </td>
                                        <td width="10%" align="right">
                                           <p:outputLabel  for="cbFrequency" value="Frecuencia*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:selectOneMenu id="cbFrequency"  value="#{OtmaintenancePreventiveBean.orderUpdate.typeFrecuency}" 
                                                             style="width: 100px; top: 6px;"
                                                             effect="puff"
                                                             height="140">
                                                <f:selectItem itemLabel="..."/>
                                                <f:selectItem itemLabel="Diaria" itemValue="DAILY"/>
                                                <f:selectItem itemLabel="Semanal" itemValue="WEEKLY"/>
                                                <f:selectItem itemLabel="Mensual" itemValue="MONTHLY"/>
                                                <f:selectItem itemLabel="Trimestral" itemValue="QUARTELY"/>
                                                <f:selectItem itemLabel="Semestral" itemValue="BIANNUAL"/>
                                                <f:selectItem itemLabel="Anual" itemValue="ANNUAL"/>
                                                <p:ajax event="change" update="dataTableSchuduler" listener="#{OtmaintenancePreventiveBean.maintenanceScheduler(OtmaintenancePreventiveBean.orderUpdate)}"/>
                                            </p:selectOneMenu>
                                            <p:spacer width="10"/>
                                            <p:spinner id="amountScheduler" value="#{OtmaintenancePreventiveBean.orderUpdate.amountSchedule}" min="1" max="20"
                                                       maxlength="2" size="2">
                                                <p:ajax event="change" update="dataTableSchuduler" listener="#{OtmaintenancePreventiveBean.maintenanceScheduler(OtmaintenancePreventiveBean.orderUpdate)}"/>
                                            </p:spinner>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel   value="Duración*"/>
                                        </td> 
                                        
                                        <td width="90%" align="left" colspan="3" >
                                            <p:spinner id="minutes" value="#{OtmaintenancePreventiveBean.minutes}" min="0" max="59"
                                                       maxlength="2" size="2">
                                                <p:ajax event="change" update="tfEndHour" process="@form"
                                                        listener="#{OtmaintenancePreventiveBean.addTime(OtmaintenancePreventiveBean.orderUpdate, 1)}"/>
                                            </p:spinner>
                                            <p:spacer width="5"/>
                                            <p:outputLabel   value="Minutos"/>
                                            <p:spacer width="20"/>
                                            <p:spinner id="hours" value="#{OtmaintenancePreventiveBean.hours}"  min="0" max="23"
                                                       maxlength="2" size="2">
                                                <p:ajax event="change" update="tfEndHour" process="@form"
                                                        listener="#{OtmaintenancePreventiveBean.addTime(OtmaintenancePreventiveBean.orderUpdate, 1)}"/>
                                            </p:spinner>
                                            <p:spacer width="5"/>
                                            <p:outputLabel   value="Horas"/>
                                            <p:spacer width="20"/>
                                            <p:spinner id="days" value="#{OtmaintenancePreventiveBean.days}" min="0" max="30"
                                                       maxlength="2" size="2">
                                                <p:ajax event="change" update="tfEndHour" process="@form"
                                                        listener="#{OtmaintenancePreventiveBean.addTime(OtmaintenancePreventiveBean.orderUpdate, 1)}"/>
                                            </p:spinner>
                                            <p:spacer width="5"/>
                                            <p:outputLabel   value="Días"/>
                                            <p:spacer width="20"/>
                                            <p:spinner id="months" value="#{OtmaintenancePreventiveBean.months}"  min="0" max="12"
                                                       maxlength="2" size="2">
                                            <p:ajax event="change" update="tfEndHour" process="@form"
                                                        listener="#{OtmaintenancePreventiveBean.addTime(OtmaintenancePreventiveBean.orderUpdate, 1)}"/>
                                            </p:spinner>
                                            <p:spacer width="5"/>
                                            <p:outputLabel   value="Meses"/>
                                        </td>
                                    </tr>
                                </table>
                            </p:panel>
                        </p:tab> 
                        <p:tab title="Mantenimientos" id="tabMtos" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para los mantenimientos programdos con la frecuencia">
                            <p:panel header="Fechas Programadas" >
                                <table width="50%" cellspacing="10" >
                                    <tr>
                                        <td>
                                            <p:dataTable id="dataTableSchuduler"
                                                         var="scheduler" 
                                                         value="#{OtmaintenancePreventiveBean.listNextDates}"
                                                         rowKey="#{scheduler.time}"
                                                         paginator="true" rows="10"  
                                                         pageLinks="40"
                                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                                                         {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         liveResize="true" rowsPerPageTemplate="15,30,50"
                                                         paginatorPosition="top"
                                                         sortBy="#{scheduler.time}">
                                                
                                                <p:column  headerText="No. Programación" sortBy="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy HH:mm:ss',scheduler)}">
                                                <center>
                                                    <p:outputLabel value="#{(OtmaintenancePreventiveBean.listNextDates.indexOf(scheduler))+1}"/>
                                                </center>
                                                </p:column>
                                                
                                                <p:column  headerText="Fecha" sortBy="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy HH:mm:ss',scheduler)}">
                                                <center>
                                                    <p:outputLabel value="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy HH:mm:ss',scheduler)}" id="outDates"/>
                                                    <p:tooltip value="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy HH:mm:ss',scheduler)}" for="outDates"/>
                                                    </center>
                                                </p:column>
                                                
                                            </p:dataTable>
                                        </td>
                                    </tr>
                                </table>
                            </p:panel>
                        </p:tab>
                        <p:tab title="Actividades" id="tabActivities" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para asignar las actividades del mantenimiento">
                            <p:panel header="Actividades del Mantenimiento" >
                                <table width="98%" cellspacing="10" >
                                    <tr>
                                        <td width="40%">
                                            <table width="100%" cellspacing="10">
                                                <tr>
                                                    <td width="40%" >
                                                        <p:outputLabel for="tfTitleActivity" value="Nombre de la Actividad*"/>
                                                    </td>
                                                    <td width="60%">
                                                        <p:inputText id="tfTitleActivity" value="#{OtmaintenancePreventiveBean.activityUpdate.name}"/>
                                                        <p:tooltip for="tfTitleActivity" value="Ingrese el título la actividad a realizar"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td width="40%">
                                                        <p:outputLabel for="tfDescriptionActivity" value="Descripción"/>
                                                    </td>
                                                    <td width="60%">
                                                        <p:inputTextarea id="tfDescriptionActivity" value="#{OtmaintenancePreventiveBean.activityUpdate.description}"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2">
                                                        <center>
                                                            <p:commandButton value="Guardar" update="tfTitleActivity,tfDescriptionActivity,dataTableActivitys"
                                                                             actionListener="#{OtmaintenancePreventiveBean.saveActivity(OtmaintenancePreventiveBean.orderUpdate.idMaintenance.scMaintenanceActivityList,
                                                                                               OtmaintenancePreventiveBean.activityUpdate, OtmaintenancePreventiveBean.orderUpdate.idMaintenance)}"/>
                                                        </center>
                                                    </td>
                                                </tr>

                                            </table>
                                        </td>
                                        <td width="60%" align="center" valign="top">
                                            <p:dataTable id="dataTableActivitys"
                                                         var="activity" 
                                                         value="#{OtmaintenancePreventiveBean.orderUpdate.idMaintenance.scMaintenanceActivityList}"
                                                         rowKey="#{activity.name}"
                                                         paginator="true" rows="10"  
                                                         pageLinks="40"
                                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                                                         {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         liveResize="true" rowsPerPageTemplate="15,30,50"
                                                         paginatorPosition="top"
                                                         sortBy="#{activity.name}">
                                                <p:column  style="width:32px">
                                                    <p:commandButton icon="ui-icon-close" update="dataTableActivitys" title="Eliminar Actividades"
                                                                     process="dataTableActivitys" 
                                                                     actionListener="#{OtmaintenancePreventiveBean.deleteActivity(OtmaintenancePreventiveBean.orderUpdate.idMaintenance.scMaintenanceActivityList, activity)}" >
                                                    </p:commandButton>
                                                </p:column>
                                                <p:column  headerText="Actividad" sortBy="#{activity.name}">
                                                    <p:outputLabel value="#{activity.name}" id="outTittle"/>
                                                    <p:tooltip value="#{activity.name}" for="outTittle"/>
                                                </p:column>
                                                <p:column  headerText="Descripción" sortBy="#{activity.description}">
                                                    <p:outputLabel value="#{activity.description}" id="outDescription"/>
                                                    <p:tooltip value="#{activity.description}" for="outDescription"/>
                                                </p:column>
                                            </p:dataTable>
                                        </td>
                                    </tr>
                                </table>
                            </p:panel>
                        </p:tab> 
                        <p:tab title="Mano de Obra" id="tabEmployees" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para asignar la mano de obra">
                            <p:panel header="Mano de Obra y Empleado" >
                                <table width="98%" cellspacing="10" >
                                    <tr>
                                        <td width="10%" >
                                            <p:outputLabel for="cbWorkForceType" value="Tipo de Mano de Obra"/>
                                        </td>
                                        <td width="40%">
                                            <p:selectOneMenu id="cbWorkForceType"  value="#{OtmaintenancePreventiveBean.orderUpdate.idMaintenance.idWorkforce.typeWorkforce}" 
                                                             style="width: 100px; top: 6px;"
                                                             effect="puff" required="true" requiredMessage="Error en el Campo Tipo de  Mano de Obra,
                                                             Debe ingresar el tipo de la mano de obra"
                                                             height="140">
                                                <f:selectItem itemLabel="..."/>
                                                <f:selectItem itemLabel="Eléctrico" itemValue="Eléctrico"/>
                                                <f:selectItem itemLabel="Mecánico" itemValue="Mecánico"/>
                                                <f:selectItem itemLabel="Electrónico" itemValue="Electrónico"/>
                                                <f:selectItem itemLabel="Hidráulico" itemValue="Hidráulico"/>
                                                <f:selectItem itemLabel="Eléctrico" itemValue="Eléctrico"/>
                                            </p:selectOneMenu>
                                        </td>
                                        <td width="10%" >
                                            <p:outputLabel for="tfWorkForce" value="Descripción Mano de Obra"/>
                                        </td>
                                        <td width="40%">
                                            <p:inputTextarea id="tfWorkForce" 
                                                             value="#{OtmaintenancePreventiveBean.orderUpdate.idMaintenance.idWorkforce.workforce}"/>
                                            <p:tooltip for="tfWorkForce" value="Ingrese la descripción de  la mano de obra a realizar"/>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td width="60%" align="center" valign="top" colspan="4">
                                            <p:dataTable id="dataTableEmployees" 
                                                         var="employees" 
                                                         value="#{OtmaintenancePreventiveBean.employeesList}"
                                                         rowKey="#{employees.idEmployee}"
                                                         paginator="true" rows="10"  
                                                         pageLinks="40"
                                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                                                         {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         liveResize="true" rowsPerPageTemplate="15,30,50"
                                                         paginatorPosition="top"
                                                         selectionMode="single"
                                                         selection="#{OtmaintenancePreventiveBean.orderUpdate.idMaintenance.idWorkforce.idEmployee}"
                                                         sortBy="#{employees.nameEmployee}">
                                                
                                                <p:ajax event="rowSelect" update="dataTableEmployees"/>
                                                <p:column selectionMode="single" width="15">
                                                    
                                                </p:column>
                                                <p:column  headerText="Empleado" sortBy="#{employees.nameEmployee}">
                                                    <p:outputLabel value="#{employees.nameEmployee}" id="outTittle"/>
                                                    <p:tooltip value="#{employees.nameEmployee}" for="outTittle"/>
                                                </p:column>
                                                <p:column  headerText="Cargo" sortBy="#{employees.position}">
                                                    <p:outputLabel value="#{employees.position}" id="outDescription"/>
                                                    <p:tooltip value="#{employees.position}" for="outDescription"/>
                                                </p:column>
                                            </p:dataTable>
                                        </td>
                                    </tr>
                                </table>
                                
                            </p:panel>
                        </p:tab> 
                        
                        <p:tab title="Confirmar" id="tabConfirm" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para confirmar los datos de la orden de mantenimiento a guardar">
                            <p:panel header="Datos Básicos" >
                                <table width="98%" cellspacing="10" >
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel   value="Nombre Mantenimiento"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel   value="#{OtmaintenancePreventiveBean.orderUpdate.name}"
                                                            />

                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel   value="Descripción"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel     value="#{OtmaintenancePreventiveBean.orderUpdate.description}"
                                                            />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel   value="Máquina"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel 
                                            value="#{OtmaintenancePreventiveBean.machineUpdate.name}" />
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  value="Parte de Máquina"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel  
                                            value="#{OtmaintenancePreventiveBean.orderUpdate.idMaintenance.idMachinePart.name}"/>
                                        </td>
                                    </tr> 
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel value="Clasificación"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel value="#{OtmaintenancePreventiveBean.orderUpdate.idMaintenance.idMaintenanceClasification.clasification}" 
                                                           />
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  value="Prioridad"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel  value="#{OtmaintenancePreventiveBean.orderUpdate.idMaintenance.idPriority.name}" 
                                                             />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  value="Daño*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel value="#{OtmaintenancePreventiveBean.orderUpdate.idMaintenance.idMaintenanceDamage.damage}" 
                                                             />
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  value="Empleado"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel value="#{OtmaintenancePreventiveBean.orderUpdate.idMaintenance.idWorkforce.idEmployee.nameEmployee}"
                                                            />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel   value="Duración"/>
                                        </td> 
                                        
                                        <td width="90%" align="left" colspan="3" >
                                            <p:outputLabel  value="#{OtmaintenancePreventiveBean.minutes}" />
                                            <p:spacer width="5"/>
                                            <p:outputLabel   value="Minutos"/>
                                            <p:spacer width="20"/>
                                            <p:outputLabel value="#{OtmaintenancePreventiveBean.hours}" />
                                            <p:spacer width="5"/>
                                            <p:outputLabel   value="Horas"/>
                                            <p:spacer width="20"/>
                                            <p:outputLabel  value="#{OtmaintenancePreventiveBean.days}"/>
                                            <p:spacer width="5"/>
                                            <p:outputLabel   value="Días"/>
                                            <p:spacer width="20"/>
                                            <p:outputLabel value="#{OtmaintenancePreventiveBean.months}" />
                                            <p:spacer width="5"/>
                                            <p:outputLabel   value="Meses"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  value="Fecha de Inicio*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel   
                                            value="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy HH:mm:ss', OtmaintenancePreventiveBean.orderUpdate.idMaintenance.creationDate)}"/>
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  value="Fecha de Finalización"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel  
                                            value="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy HH:mm:ss', OtmaintenancePreventiveBean.endDate)}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="98%" align="right" colspan="4">
                                            <p:commandButton id="btnUpdateMaintenance" value="Guardar Mantenimiento" 
                                                             actionListener="#{OtmaintenancePreventiveBean.updateMaintenance()}" update=":formPreventive:otDataTablePreventive,:formWizarMaintenanceUpdate"
                                                             oncomplete="PF('wizardUpdate').loadStep('tabGeneral', false);PF('dialogMaintenanceUpdate').hide();"/>
                                            <p:spacer width="30"/>
                                            <p:commandButton id="btnCancelMaintenance" value="Cancelar" oncomplete="PF('dialogMaintenanceUpdate').hide();PF('wizardUpdate').loadStep('tabGeneral', false)"
                                                             actionListener="#{OtmaintenancePreventiveBean.cleanValues()}" update=":formPreventive:otDataTablePreventive,:formWizarMaintenanceUpdate"
                                                             />
                                        </td>
                                    </tr>
                                </table>
                            </p:panel>
                        </p:tab> 
                    </p:wizard>
                </h:form>
                
            </p:dialog>
            <!--         finaliza el dialogo para actualizar mantenimientos               --> 
            
            
            
            
            
            
            
            
            
            
            <!--            Tabla de Mantenimientos                                                   -->
            <h:form id="formPreventive">
                <p:remoteCommand name="preventiveInit" update=":formPreventive:otDataTablePreventive" />
                <p:panel style="width: 99%;" toggleable="true" header="Ordenes de Mantenimiento Preventivo"
                         toggleOrientation="vertical" toggleTitle="Reduzca el tamaño de este menú">
                    <table width="100%" style="color: #FFF;">
                        <tr>
                            <td align="right">
                                <p:outputLabel value="Fecha Inicial:" for="initDate"/>
                            </td>
                            <td align="left">
                                <p:calendar value="#{OtmaintenancePreventiveBean.filterStarDate}" autocomplete="true" effect="explode" id="initDate" pattern="dd-MM-yyyy" 
                                            title="Ingrese la fecha inicial del rango que desea consultar" mask="true">
                                    <p:ajax listener="#{OtmaintenancePreventiveBean.compareToDates()}" event="dateSelect" update="initDate, endDate"/>
                                </p:calendar>
                            </td>
                            <td align="right">
                                <p:outputLabel value="Fecha Final:" for="endDate"/>
                            </td>
                            <td align="left">
                                <p:calendar value="#{OtmaintenancePreventiveBean.filterEndDate}" autocomplete="true" effect="explode" id="endDate" pattern="dd-MM-yyyy" 
                                            title="Ingrese la fecha final del rango que desea consultar" mask="true" >
                                    <p:ajax listener="#{OtmaintenancePreventiveBean.compareToDates()}" event="dateSelect" update="initDate, endDate"/>
                                </p:calendar>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">
                                <p:outputLabel value="Clasificación:" for="cbOrderType"/>
                            </td>
                            <td align="left">
                                <p:selectOneMenu id="cbOrderType" value="#{OtmaintenancePreventiveBean.clasification}" 
                                                 style="width: 160px; top: 6px;" converter="maintenanceClasificationConverter"
                                                 effect="puff"
                                                 height="140">
                                    <f:selectItem itemLabel="..."/>
                                    <f:selectItems value="#{OtmaintenancePreventiveBean.listClasifications}" var="clasification" 
                                                   itemLabel="#{clasification.clasification}"/>
                                </p:selectOneMenu>                                               
                            </td>
                            <td align="right">
                                <p:outputLabel value="Estado:" for="cbOrderClass"/>
                            </td>
                            <td align="left">
                                <p:selectOneMenu id="cbOrderClass"  value="#{OtmaintenancePreventiveBean.maintenanceState}" 
                                                 style="width:160px; top: 6px;"
                                                 effect="puff" converter="maintenanceStateConverter"
                                                 height="140">
                                    <f:selectItem itemLabel="..." />
                                    <f:selectItems value="#{OtmaintenancePreventiveBean.listStates}" var="state" 
                                                   itemLabel="#{state.state}"/>
                                </p:selectOneMenu>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2" align="right">
                                <p:commandButton value="Buscar" actionListener="#{OtmaintenancePreventiveBean.doSearchWithParameters()}" 
                                                 update="otDataTablePreventive"/>
                            </td>
                            <td colspan="2" align="left">
                                <p:commandButton value="Limpiar" actionListener="#{OtmaintenancePreventiveBean.resetData()}" 
                                                 update="otDataTablePreventive,initDate,endDate,cbOrderType,cbOrderClass"/>
                            </td>
                        </tr>
                    </table>
                </p:panel>
                
                
                <p:dataTable id="otDataTablePreventive" draggableColumns="true" emptyMessage="No existe información para visualizar" 
                             value="#{OtmaintenancePreventiveBean.preventiveList}" var="preventive"
                             paginator="true" rows="10"  
                             pageLinks="40"
                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                             {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             rowKey="#{preventive.idMaintenancePreventive}"
                             resizableColumns="true" 
                             liveResize="true" rowsPerPageTemplate="10,20,30" 
                             selectionMode="single" paginatorPosition="top"
                             sortBy="#{preventive.idMaintenancePreventive}"
                             >
                    <f:facet name="header">
                        <p:commandButton icon="ui-icon-plus" id="btnAdd" style="float: right;"  
                                         oncomplete="PF('dialogMaintenance').show()">
                            <p:tooltip for="btnAdd" value="Agregar un Mantenimiento"/>
                        </p:commandButton>
                    </f:facet>

                    <p:column filterMatchMode="contains"  filterBy="OM#{OtmaintenancePreventiveBean.getFormatDateGlobal('yyyyMMddHHmmss', preventive.idMaintenance.creationDate)}#{preventive.idMaintenance.idMaintenance}" headerText="No Orden" 
                              sortBy="#{preventive.name}" id="columnIdMachine">    
                        <center>
                            <p:outputLabel id="lblIdMachine" value="OM#{OtmaintenancePreventiveBean.getFormatDateGlobal('yyyyMMddHHmmss', preventive.idMaintenance.creationDate)}#{preventive.idMaintenance.idMaintenance}" />
                            <p:tooltip for="lblIdMachine" value="OM#{OtmaintenancePreventiveBean.getFormatDateGlobal('yyyyMMddHHmmss', preventive.idMaintenance.creationDate)}#{preventive.idMaintenance.idMaintenance}"/>
                        </center>
                    </p:column>
                    
                    <p:column filterMatchMode="contains"  filterBy="#{preventive.name}" headerText="Mantenimiento" 
                              sortBy="#{preventive.name}" id="columnName">    
                        <center>
                            <p:outputLabel value="#{preventive.name}" id="lblName"/>
                            <p:tooltip for="lblName" value="#{preventive.name}"/>
                        </center>
                    </p:column>
                    
                    <p:column filterMatchMode="contains"  filterBy="#{preventive.idMaintenance.idMachinePart.idMachine.name}"
                              headerText="Máquina" sortBy="#{preventive.idMaintenance.idMachinePart.idMachine.name}" id="columnMachine">    
                        <center>
                            <p:outputLabel value="#{preventive.idMaintenance.idMachinePart.idMachine.name}" id="lblMachine"/>
                            <p:tooltip for="lblMachine" value="#{preventive.idMaintenance.idMachinePart.idMachine.name}"/>
                        </center>
                    </p:column>

                    <p:column filterMatchMode="contains"  filterBy="#{preventive.idMaintenance.idMachinePart.name}" 
                              id="columnMachinePart" headerText="Parte de Máquina" sortBy="#{preventive.idMaintenance.idMachinePart.name}">    
                        <center>
                            <p:outputLabel value="#{preventive.idMaintenance.idMachinePart.name}" id="lblMachinePart"/>
                            <p:tooltip for="lblMachinePart" value="#{preventive.idMaintenance.idMachinePart.name}"/>
                        </center>
                    </p:column>
                    <p:column filterMatchMode="contains"  filterBy="#{preventive.idMaintenance.idMaintenanceDamage.damage}"
                              headerText="Daño" sortBy="#{preventive.idMaintenance.idMaintenanceDamage.damage}" id="columnDamage">    
                        <center>
                            <p:outputLabel value="#{preventive.idMaintenance.idMaintenanceDamage.damage}" id="lblDamage"/>
                            <p:tooltip for="lblDamage" value="#{preventive.idMaintenance.idMaintenanceDamage.damage}"/>
                        </center>
                    </p:column>
                    <p:column filterMatchMode="contains"  filterBy="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy', preventive.idMaintenance.creationDate)}" 
                              id="columnCreationDate" headerText="Fecha Creación" sortBy="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy', preventive.idMaintenance.creationDate)}">    
                        <center>
                            <p:outputLabel value="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy', preventive.idMaintenance.creationDate)}" id="lblCreationDate"/>
                            <p:tooltip for="lblCreationDate" value="#{OtmaintenancePreventiveBean.getFormatDateGlobal('dd/MM/yyyy', preventive.idMaintenance.creationDate)}"/>
                        </center>
                    </p:column>
                    <p:column filterMatchMode="contains"  filterBy="#{preventive.idMaintenance.idMaintenanceState.state}" 
                              id="columnMaintenanceState" headerText="Estado" sortBy="#{preventive.idMaintenance.idMaintenanceState.state}">    
                        <center>
                            <p:outputLabel value="#{preventive.idMaintenance.idMaintenanceState.state}" id="lblMaintenanceState"/>
                            <p:tooltip for="lblMaintenanceState" value="#{preventive.idMaintenance.idMaintenanceState.state}"/>
                        </center>
                    </p:column>
                    <p:column headerText="Admin" width="100">
                        <center>
                            <p:commandButton icon="ui-icon-search" id="btnSearch" update=":formWizarMaintenanceView:tabViewMaintenance"
                                             oncomplete="PF('dialogMaintenanceView').show()" actionListener="#{OtmaintenancePreventiveBean.selectedForViewOrDelete(preventive)}">
                                <p:tooltip for="btnSearch" value="Visualizar un Mantenimiento"/>
                            </p:commandButton>
                            <p:spacer width="3"/>
                            <p:commandButton icon="ui-icon-pencil" id="btnEdit" update=":formWizarMaintenanceUpdate"
                                             actionListener="#{OtmaintenancePreventiveBean.selectedForUpdate(preventive)}"
                                             oncomplete="PF('dialogMaintenanceUpdate').show()"  
                                             >
                                <p:tooltip for="btnEdit" value="Editar un Mantenimiento"/>
                            </p:commandButton>
                            <p:spacer width="3"/>
                            <p:commandButton icon="ui-icon-close" id="btnDelete" oncomplete="PF('dialogMaintenanceDelete').show()" 
                                            actionListener="#{OtmaintenancePreventiveBean.selectedForViewOrDelete(preventive)}" >
                                <p:tooltip for="btnDelete" value="Eliminar un Mantenimiento"/>
                            </p:commandButton>
                        </center>
                    </p:column>
                </p:dataTable>
            </h:form>

        </div>
    </h:body>
</html>

