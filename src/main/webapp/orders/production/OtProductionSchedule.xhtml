<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>             <meta http-equiv="expires" content="0"></meta>             <meta http-equiv="Cache-Control" content="no-cache"></meta>             <meta http-equiv="Cache-Control" content="no-cache"></meta>
        <title>.:FATCON:. - Programación de Ordenes de Producción</title>
        <link rel="stylesheet" type="text/css" href="#{request.contextPath}/css/webStyle.css"/>
        <script type="text/javascript">
            function start() {
                PF('statusDialog').show();
            }

            function stop() {
                PF('statusDialog').hide();
            }
            //window.setTimeout("preventiveInit()",1000);
            PrimeFaces.locales['es'] = 
            {
                closeText: 'Cerrar',
                prevText: 'Anterior',
                nextText: 'Siguiente',
                monthNames: ['Enero','Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
                monthNamesShort: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun','Jul','Ago','Sep','Oct','Nov','Dic'],
                dayNames: ['Domingo','Lunes','Martes','Miércoles','Jueves','Viernes','Sábado'],
                dayNamesShort: ['Dom','Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab'],
                dayNamesMin: ['D','L','M','X','J','V','S'],
                weekHeader: 'Semana',
                firstDay: 1,
                isRTL: false,
                showMonthAfterYear: false,
                yearSuffix: '',
                timeOnlyTitle: 'Sólo hora',
                timeText: 'Tiempo',
                hourText: 'Hora',
                minuteText: 'Minuto',
                secondText: 'Segundo',
                currentText: 'Fecha actual',
                ampm: false,
                month: 'Mes',
                week: 'Semana',
                day: 'Día',
                allDayText : 'Todo el día'
            };
        </script>
    </h:head>
    <h:body style="background-color: #000;">
        <p:ajaxStatus onstart="PF('statusDialog').show()" oncomplete="PF('statusDialog').hide()"/>
        <p:dialog modal="true" widgetVar="statusDialog" header="Cargando..."
                  draggable="false" closable="false" resizable="false">
            <p:graphicImage value="/images/loadBar.gif"/>
        </p:dialog>

        <p:growl autoUpdate="true" showDetail="true" life="8000" />





        <!--            Inicia el calendario de mantenimientos-->
        <center>
        <div style="height: 100px; width: 90%; text-align: center;">
            <p:schedule id="schedule" value="#{OtproductionScheduleBean.productionSchedule}" widgetVar="productionSchedule" timeZone="GMT+1" locale="es" aspectRatio="2.5"
                        tooltip="true" draggable="false" resizable="false">
<!--                <p:ajax event="dateSelect" />-->
            <p:ajax event="dateSelect" update=":formWizarProductionSave:" listener="#{OtproductionScheduleBean.onDateSelect}" />
            <p:ajax event="eventSelect" listener="#{OtproductionScheduleBean.onEventSelect}" update=":formWizarProductionView:,:formWizarProductionUpdate:"/>
            </p:schedule>
        </div>
        </center>
        <!--                finaliza el calendario de mantenimientos-->
   
        
        
<!--         Dialogo para guardar nuevas ordenes         -->
            <p:dialog id="dialogProductionSave" widgetVar="dialogProductionSave" draggable="true" 
                      closable="true"  header="Crear Ordenes de Producción" position="center top" width="800"
                      hideEffect="explode" modal="true" showEffect="explode" resizable="true">

                <h:form id="formWizarProductionSave" >

                    <p:wizard  flowListener="#{OtproductionScheduleBean.onFlowProcessSaveProduction}" id="wizardSave" widgetVar="wizardSave" 
                               backLabel="Atras" nextLabel="Siguiente">
                        <p:tab title="Datos Generales" id="tabGeneral" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para los datos básicos de ordenes de producción">
                            <p:panel header="Datos Básicos" >
                                <table width="98%" cellspacing="10" >
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfNameProduction" value="Descripción Orden*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputTextarea    id="tfNameProduction"  value="#{OtproductionScheduleBean.orderSave.name}">
                                                <p:tooltip for="tfNameProduction"   value="#{OtproductionScheduleBean.orderSave.name}" />
                                            </p:inputTextarea>

                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfDescription" value="Especificación"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputTextarea    id="tfDescription"  value="#{OtproductionScheduleBean.orderSave.description}"
                                                                />
                                        </td>
                                    </tr>
                                    <tr> 
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfStartDate" value="Fecha de Inicio*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:calendar value="#{OtproductionScheduleBean.orderSave.startDate}" autocomplete="true" effect="explode" id="tfStartDate" pattern="dd-MM-yyyy HH:mm" 
                                                        title="Debe ingresar la fecha de programación de la orden de producción" mask="true" 
                                                        mindate="#{OtproductionScheduleBean.currentDate}">
                                                <p:ajax listener="#{OtproductionScheduleBean.calculateEndDate(OtproductionScheduleBean.orderSave)}" update="tfEndHour" event="dateSelect"/>
                                            </p:calendar>
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfEndHour" value="Fecha de Finalización*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputText  readonly="true"  id="tfEndHour"  
                                                          value="#{OtproductionScheduleBean.getFormatDateGlobal('dd-MM-yyyy HH:mm', OtproductionScheduleBean.orderSave.endDate)}"/>
                                            <p:tooltip for="tfEndHour" value="La Fecha de Finalización se calcula con base a la hora de inicio y la duracción de los procesos"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfProductItem" value="Producto*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:autoComplete id="tfProductItem" completeMethod="#{OtproductionScheduleBean.autocompleteMetod}" 
                                                            forceSelection="true" effect="explode" 
                                                            value="#{OtproductionScheduleBean.productAdd}" emptyMessage="No hay resultados" 
                                                            placeholder="Ingrese cualquier caracter"/>

                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfAmount" value="Cantidad*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:spinner    id="tfAmount"  value="#{OtproductionScheduleBean.amount}"
                                                          min="1" size="8"
                                                          style="width: 100px;">

                                            </p:spinner>
                                            <p:spacer width="5px"/>
                                            <p:commandButton icon="ui-icon-plus" id="btnAddItem" 
                                                             actionListener="#{OtproductionScheduleBean.addProductsToOrder(OtproductionScheduleBean.orderSave.productionsOrders,OtproductionScheduleBean.orderSave)}" 
                                                             update="tfProductItem,tfAmount,otDataTableOrderSave,tfEndHour,otDataTableProducts"
                                                             >
                                                <p:tooltip for="btnAddItem" value="Agregue productos a la orden"/>
                                            </p:commandButton>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="100%" align="center" colspan="4">


                                            <p:dataTable id="otDataTableOrderSave" emptyMessage="No existe información para visualizar" 
                                                         paginator="true" rows="5"  
                                                         pageLinks="40"
                                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                                                         {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         value="#{OtproductionScheduleBean.orderSave.productionsOrders}" var="production"
                                                         rowKey="#{production.idProductionProduct}"
                                                         rowsPerPageTemplate="5,10" 
                                                         sortBy="#{production.idProductionProduct}"
                                                         >
                                                <p:column id="columnProduction" headerText="Producto" sortBy="#{production.idProductFormulation.description}">    
                                                    <center>
                                                        <p:outputLabel value="#{production.idProductFormulation.description}" id="lblProduction"/>
                                                        <p:tooltip for="lblProduction" value="#{production.idProductFormulation.description}"/>
                                                    </center>
                                                </p:column>
                                                <p:column id="columnAmountProduction" headerText="Cantidad" sortBy="#{production.amount}"
                                                          width="100">    
                                                    <center>
                                                        <p:spinner value="#{production.amount}" id="lblAmountProduction"  min="1" 
                                                                   size="8">
                                                            <p:ajax listener="#{OtproductionScheduleBean.calculateEndDate(OtproductionScheduleBean.orderSave)}" update=":formWizarProductionSave:tfEndHour" event="change"/>
                                                            <p:tooltip for="lblAmountProduction" value="#{production.amount}"/>
                                                        </p:spinner>
                                                    </center>
                                                </p:column>
                                            </p:dataTable>
                                        </td>
                                    </tr> 

                                </table>
                            </p:panel>
                        </p:tab> 
                        <p:tab title="Detalle" id="Productos" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para ver el detalle de la orden de producción">
                            <p:panel header="Productos de la Orden">

                                <p:dataTable id="otDataTableProducts" emptyMessage="No existe información para visualizar" 
                                             paginator="true" rows="5"  
                                             pageLinks="40"
                                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                                             {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             value="#{OtproductionScheduleBean.orderSave.productionsOrders}" var="product"
                                             rowKey="#{product.idProductionProduct}"
                                             rowsPerPageTemplate="5,10" 
                                             sortBy="#{product.idProductionProduct}"
                                             >
                                    <p:column id="columnProduction" headerText="Producto" 
                                              sortBy="#{product.idProductFormulation.description}">    
                                        <center>
                                            <p:outputLabel value="#{product.idProductFormulation.description}" id="lblProductionItem"/> 
                                            <p:tooltip value="#{product.idProductFormulation.description}" for="lblProductionItem"/>
                                        </center>
                                    </p:column>
                                    
                                    <p:column id="columnMarkItem" headerText="Marca" 
                                              sortBy="#{product.idProductFormulation.mark}">    
                                        <center>
                                            <p:outputLabel value="#{product.idProductFormulation.mark}" id="lblMarkItem"/> 
                                            <p:tooltip value="#{product.idProductFormulation.mark}" for="lblMarkItem"/>
                                        </center>
                                    </p:column>
                                    <p:column id="columnSerieItem" headerText="Serie" 
                                              sortBy="#{product.idProductFormulation.serie}">    
                                        <center>
                                            <p:outputLabel value="#{product.idProductFormulation.serie}" id="lblSerieItem"/> 
                                            <p:tooltip value="#{product.idProductFormulation.serie}" for="lblSerieItem"/>
                                        </center>
                                    </p:column>
                                    <p:column id="columnAmountItem" headerText="Cantidad" 
                                              sortBy="#{product.amount}">    
                                        <center>
                                            <p:outputLabel value="#{product.amount}" id="lblAmountItem"/> 
                                            <p:tooltip value="#{product.amount}" for="lblAmountItem"/>
                                        </center>
                                    </p:column>
                                    <p:column id="columnTimeItem" headerText="Tiempo de Fabricación C/U" 
                                              sortBy="#{OtproductionScheduleBean.getCountTimeProductByOrder(product.idProductFormulation)}">    
                                        <center>
                                            <p:outputLabel value="#{OtproductionScheduleBean.getCountTimeProductByOrder(product.idProductFormulation)} min" id="lblTimeItem"/> 
                                            <p:tooltip value="#{OtproductionScheduleBean.getCountTimeProductByOrder(product.idProductFormulation)} min" for="lblTimeItem"/>
                                        </center>
                                    </p:column>
                                    <p:column id="columnCostItem" headerText="Costo de Fabricación C/U" 
                                              sortBy="#{OtproductionScheduleBean.getCountCostProductByOrder(product.idProductFormulation)}">    
                                        <center>
                                            <p:outputLabel value="#{OtproductionScheduleBean.getCountCostProductByOrder(product.idProductFormulation)} #{product.idProductFormulation.money.acronym}" id="lblCostItem"/> 
                                            <p:tooltip value="#{OtproductionScheduleBean.getCountCostProductByOrder(product.idProductFormulation)} #{product.idProductFormulation.money.acronym}" for="lblCostItem"/>
                                        </center>
                                    </p:column>
                                    <p:column id="columnAdmin" headerText="Admin">
                                        <center>
                                            <p:commandButton icon="ui-icon-search" id="btnSearchProduct"  update=":formWizardProcessSave"
                                                             action="#{OtproductionScheduleBean.selectProcessByProduct(product.idProductFormulation)}"
                                                             onsuccess="PF('dialogDetailSave').show()"
                                                             >
                                                <p:tooltip for="btnSearchProduct" value="Visualizar un Producto "/>
                                            </p:commandButton>
                                        </center>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>
                        </p:tab> 
                        <p:tab title="Confirmar Orden de Producción" id="tabConfirm" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para confirmar la orden">
                            <p:panel header="Confirmar Orden" >

                                <table width="100%" cellspacing="10">
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="lblNameProduction" value="Descripción Orden*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel    id="lblNameProduction"  value="#{OtproductionScheduleBean.orderSave.name}">
                                            </p:outputLabel>

                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="lblDescription" value="Especificación"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel    id="lblDescription"  value="#{OtproductionScheduleBean.orderSave.description}"
                                                                />
                                        </td>
                                    </tr>
                                    <tr> 
                                        <td width="10%" align="right">
                                            <p:outputLabel  value="Fecha de Inicio*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel value="#{OtproductionScheduleBean.getFormatDateGlobal('dd-MM-yyyy HH:mm:ss', OtproductionScheduleBean.orderSave.startDate)}"
                                                       />
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel   value="Fecha de Finalización*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel value="#{OtproductionScheduleBean.getFormatDateGlobal('dd-MM-yyyy HH:mm:ss', OtproductionScheduleBean.orderSave.endDate)}"
                                                       />
                                        </td>
                                    </tr>
                                    <tr> 
                                        <td width="10%" align="right">
                                            <p:outputLabel  value="Cantidad de Productos"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel value="#{OtproductionScheduleBean.getCountListProduct(OtproductionScheduleBean.orderSave)}"
                                                           />
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel   value="Tiempo Programado de Fabricación C/U"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel value="#{OtproductionScheduleBean.getCountTimeOrdenProduction(OtproductionScheduleBean.orderSave)} (min)"
                                            />
                                        </td>
                                    </tr>
                                    <tr> 
                                        <td width="10%" align="right">
                                            <p:outputLabel  value="Costo Programado de Fabricación C/U"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel value="#{OtproductionScheduleBean.getCountCostOrdenProduction(OtproductionScheduleBean.orderSave)} $"
                                                           />
                                        </td>
                                        <td width="10%" align="right">
                                            
                                        </td>
                                        <td width="40%" align="left">
                                            
                                        </td>
                                    </tr>
                                    <tr>
                                        <td align="center" colspan="4">
                                            <p:commandButton value="Guardar" 
                                                             actionListener="#{OtproductionScheduleBean.saveOrderProduction()}"
                                            update=":formWizarProductionSave,:schedule" oncomplete="PF('dialogProductionSave').hide();PF('dialogDetailSave').hide();PF('dialogProcessDetailSave').hide();PF('wizardSave').loadStep('tabGeneral', true)"/>
                                            <p:spacer width="20px"/>
                                            <p:commandButton value="Cancelar" actionListener="#{OtproductionScheduleBean.cleanValues()}"
                                                             update=":formWizarProductionSave" oncomplete="PF('dialogProductionSave').hide();PF('dialogDetailSave').hide();PF('dialogProcessDetailSave').hide();PF('wizardSave').loadStep('tabGeneral', true)"/>
                                        </td>
                                    </tr>
                                </table>

                            </p:panel>
                        </p:tab>
                    </p:wizard>
                </h:form>

            </p:dialog>
            <!--         finaliza el Dialogo para guardar nuevas ordenes               -->

<!--            inicial el dialogo para ver nuevas ordenes-->
<p:dialog id="dialogProductionView" widgetVar="dialogProductionView" draggable="true" 
                      closable="true"  header="Actualizar Ordenes de Producción" position="center top" width="800"
                      hideEffect="explode" modal="true" showEffect="explode" resizable="true">

                <h:form id="formWizarProductionView" >
                    <p:tabView dynamic="true" cache="true" effect="explode" id="tabFather" scrollable="true" activeIndex="0" >
                        <p:tab title="Datos Generales" id="tabGeneral" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para los datos básicos de ordenes de producción">
                            <p:panel header="Datos Básicos" >
                                <table width="98%" cellspacing="10" >
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfNameProduction" value="Descripción Orden*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputTextarea readonly="true"   id="tfNameProduction"  value="#{OtproductionScheduleBean.orderSelected.name}">
                                                <p:tooltip for="tfNameProduction"   value="#{OtproductionScheduleBean.orderSelected.name}" />
                                            </p:inputTextarea>

                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfDescription" value="Especificación"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputTextarea  readonly="true"  id="tfDescription"  value="#{OtproductionScheduleBean.orderSelected.description}"
                                                                />
                                        </td>
                                    </tr>
                                    <tr> 
                                        <td width="10%" align="right">
                                            <p:outputLabel  value="Fecha de Inicio*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputText readonly="true" value="#{OtproductionScheduleBean.getFormatDateGlobal('dd-MM-yyyy HH:mm', OtproductionScheduleBean.orderSelected.startDate)}" />
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfEndHour" value="Fecha de Finalización*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputText  readonly="true"  id="tfEndHour"  
                                                          value="#{OtproductionScheduleBean.getFormatDateGlobal('dd-MM-yyyy HH:mm', OtproductionScheduleBean.orderSelected.endDate)}"/>
                                            <p:tooltip for="tfEndHour" value="La Fecha de Finalización se calcula con base a la hora de inicio y la duracción de los procesos"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="100%" align="center" colspan="4">


                                            <p:dataTable id="otDataTableorderSelected" emptyMessage="No existe información para visualizar" 
                                                         paginator="true" rows="5"  
                                                         pageLinks="40"
                                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                                                         {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         value="#{OtproductionScheduleBean.orderSelected.productionsOrders}" var="production"
                                                         rowKey="#{production.idProductionProduct}"
                                                         rowsPerPageTemplate="5,10" 
                                                         sortBy="#{production.idProductionProduct}"
                                                         >
                                                <p:column id="columnProduction" headerText="Producto" sortBy="#{production.idProductFormulation.description}">    
                                                    <center>
                                                        <p:outputLabel value="#{production.idProductFormulation.description}" id="lblProduction"/>
                                                        <p:tooltip for="lblProduction" value="#{production.idProductFormulation.description}"/>
                                                    </center>
                                                </p:column>
                                                <p:column id="columnAmountProduction" headerText="Cantidad" sortBy="#{production.amount}"
                                                          width="100">    
                                                    <center>
                                                        <p:outputLabel  value="#{production.amount}" id="lblAmountProduction"/>
                                                    </center>
                                                </p:column>
                                            </p:dataTable>
                                        </td>
                                    </tr> 

                                </table>
                            </p:panel>
                        </p:tab> 
                        <p:tab title="Detalle" id="Productos" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para ver el detalle de la orden de producción">
                            <p:panel header="Productos de la Orden">

                                <p:dataTable id="otDataTableProducts" emptyMessage="No existe información para visualizar" 
                                             paginator="true" rows="5"  
                                             pageLinks="40"
                                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                                             {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             value="#{OtproductionScheduleBean.orderSelected.productionsOrders}" var="product"
                                             rowKey="#{product.idProductionProduct}"
                                             rowsPerPageTemplate="5,10" 
                                             sortBy="#{product.idProductionProduct}"
                                             >
                                    <p:column id="columnProduction" headerText="Producto" 
                                              sortBy="#{product.idProductFormulation.description}">    
                                        <center>
                                            <p:outputLabel value="#{product.idProductFormulation.description}" id="lblProductionItem"/> 
                                            <p:tooltip value="#{product.idProductFormulation.description}" for="lblProductionItem"/>
                                        </center>
                                    </p:column>
                                    
                                    <p:column id="columnMarkItem" headerText="Marca" 
                                              sortBy="#{product.idProductFormulation.mark}">    
                                        <center>
                                            <p:outputLabel value="#{product.idProductFormulation.mark}" id="lblMarkItem"/> 
                                            <p:tooltip value="#{product.idProductFormulation.mark}" for="lblMarkItem"/>
                                        </center>
                                    </p:column>
                                    <p:column id="columnSerieItem" headerText="Serie" 
                                              sortBy="#{product.idProductFormulation.serie}">    
                                        <center>
                                            <p:outputLabel value="#{product.idProductFormulation.serie}" id="lblSerieItem"/> 
                                            <p:tooltip value="#{product.idProductFormulation.serie}" for="lblSerieItem"/>
                                        </center>
                                    </p:column>
                                    <p:column id="columnAmountItem" headerText="Cantidad" 
                                              sortBy="#{product.amount}">    
                                        <center>
                                            <p:outputLabel value="#{product.amount}" id="lblAmountItem"/> 
                                            <p:tooltip value="#{product.amount}" for="lblAmountItem"/>
                                        </center>
                                    </p:column>
                                    <p:column id="columnTimeItem" headerText="Tiempo de Fabricación C/U" 
                                              sortBy="#{OtproductionScheduleBean.getCountTimeProductByOrder(product.idProductFormulation)}">    
                                        <center>
                                            <p:outputLabel value="#{OtproductionScheduleBean.getCountTimeProductByOrder(product.idProductFormulation)} min" id="lblTimeItem"/> 
                                            <p:tooltip value="#{OtproductionScheduleBean.getCountTimeProductByOrder(product.idProductFormulation)} min" for="lblTimeItem"/>
                                        </center>
                                    </p:column>
                                    <p:column id="columnCostItem" headerText="Costo de Fabricación C/U" 
                                              sortBy="#{OtproductionScheduleBean.getCountCostProductByOrder(product.idProductFormulation)}">    
                                        <center>
                                            <p:outputLabel value="#{OtproductionScheduleBean.getCountCostProductByOrder(product.idProductFormulation)} #{product.idProductFormulation.money.acronym}" id="lblCostItem"/> 
                                            <p:tooltip value="#{OtproductionScheduleBean.getCountCostProductByOrder(product.idProductFormulation)} #{product.idProductFormulation.money.acronym}" for="lblCostItem"/>
                                        </center>
                                    </p:column>
                                    <p:column id="columnAdmin" headerText="Admin">
                                        <center>
                                            <p:commandButton icon="ui-icon-search" id="btnSearchProduct"  update=":formWizardProcessSave"
                                                             action="#{OtproductionScheduleBean.selectProcessByProduct(product.idProductFormulation)}"
                                                             onsuccess="PF('dialogDetailSave').show()"
                                                             >
                                                <p:tooltip for="btnSearchProduct" value="Visualizar un Producto "/>
                                            </p:commandButton>
                                        </center>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>
                        </p:tab> 
                        <p:tab title="Detalle Orden de Producción" id="tabConfirm" titleStyleClass="tabTittleSavePerson" 
                               titletip="Detalles de la orden de producción">
                            <p:panel header="Confirmar Orden" >

                                <table width="100%" cellspacing="10">
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="lblNameProduction" value="Descripción Orden*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel    id="lblNameProduction"  value="#{OtproductionScheduleBean.orderSelected.name}">
                                            </p:outputLabel>

                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="lblDescription" value="Especificación"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel    id="lblDescription"  value="#{OtproductionScheduleBean.orderSelected.description}"
                                                                />
                                        </td>
                                    </tr>
                                    <tr> 
                                        <td width="10%" align="right">
                                            <p:outputLabel  value="Fecha de Inicio*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel value="#{OtproductionScheduleBean.getFormatDateGlobal('dd-MM-yyyy HH:mm:ss', OtproductionScheduleBean.orderSelected.startDate)}"
                                                       />
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel   value="Fecha de Finalización*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel value="#{OtproductionScheduleBean.getFormatDateGlobal('dd-MM-yyyy HH:mm:ss', OtproductionScheduleBean.orderSelected.endDate)}"
                                                       />
                                        </td>
                                    </tr>
                                    <tr> 
                                        <td width="10%" align="right">
                                            <p:outputLabel  value="Cantidad de Productos"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel value="#{OtproductionScheduleBean.getCountListProduct(OtproductionScheduleBean.orderSelected)}"
                                                           />
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel   value="Tiempo Programado de Fabricación"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel value="#{OtproductionScheduleBean.getCountTimeOrdenProduction(OtproductionScheduleBean.orderSelected)} (min)"
                                            />
                                        </td>
                                    </tr>
                                    <tr> 
                                        <td width="10%" align="right">
                                            <p:outputLabel  value="Costo Programado de Fabricación "/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel value="#{OtproductionScheduleBean.getCountCostOrdenProduction(OtproductionScheduleBean.orderSelected)} $"
                                                           />
                                        </td>
                                        <td width="10%" align="right">
                                            
                                        </td>
                                        <td width="40%" align="left">
                                            
                                        </td>
                                    </tr>
                                </table>

                            </p:panel>
                        </p:tab>
                        </p:tabView>
                </h:form>

            </p:dialog>
<!--            finaliza el dialogo para ver nuevas ordenes-->
        
        
<!--            inicia el dialogo para actualizar nuevas ordenes-->
<p:dialog id="dialogProductionUpdate" widgetVar="dialogProductionUpdate" draggable="true" 
                      closable="true"  header="Actualizar Ordenes de Producción" position="center top" width="800"
                      hideEffect="explode" modal="true" showEffect="explode" resizable="true">

                <h:form id="formWizarProductionUpdate" >

                    <p:wizard  flowListener="#{OtproductionScheduleBean.onFlowProcessUpdateProduction}" id="wizardUpdate" widgetVar="wizardUpdate" 
                               backLabel="Atras" nextLabel="Siguiente">
                        <p:tab title="Datos Generales" id="tabGeneral" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para los datos básicos de ordenes de producción">
                            <p:panel header="Datos Básicos" >
                                <table width="98%" cellspacing="10" >
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfNameProduction" value="Descripción Orden*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputTextarea    id="tfNameProduction"  value="#{OtproductionScheduleBean.orderUpdate.name}">
                                                <p:tooltip for="tfNameProduction"   value="#{OtproductionScheduleBean.orderUpdate.name}" />
                                            </p:inputTextarea>

                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfDescription" value="Especificación"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputTextarea    id="tfDescription"  value="#{OtproductionScheduleBean.orderUpdate.description}"
                                                                />
                                        </td>
                                    </tr>
                                    <tr> 
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfStartDate" value="Fecha de Inicio*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:calendar value="#{OtproductionScheduleBean.orderUpdate.startDate}" autocomplete="true" effect="explode" id="tfStartDate" pattern="dd-MM-yyyy HH:mm" 
                                                        title="Debe ingresar la fecha de programación de la orden de producción" mask="true" 
                                                        mindate="#{OtproductionScheduleBean.currentDate}">
                                                <p:ajax listener="#{OtproductionScheduleBean.calculateEndDate(OtproductionScheduleBean.orderUpdate)}" update="tfEndHour" event="dateSelect"/>
                                            </p:calendar>
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfEndHour" value="Fecha de Finalización*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:inputText  readonly="true"  id="tfEndHour"  
                                                          value="#{OtproductionScheduleBean.getFormatDateGlobal('dd-MM-yyyy HH:mm', OtproductionScheduleBean.orderUpdate.endDate)}"/>
                                            <p:tooltip for="tfEndHour" value="La Fecha de Finalización se calcula con base a la hora de inicio y la duracción de los procesos"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfProductItem" value="Producto*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:autoComplete id="tfProductItem" completeMethod="#{OtproductionScheduleBean.autocompleteMetod}" 
                                                            forceSelection="true" effect="explode" 
                                                            value="#{OtproductionScheduleBean.productAdd}" emptyMessage="No hay resultados" 
                                                            placeholder="Ingrese cualquier caracter"/>

                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="tfAmount" value="Cantidad*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:spinner    id="tfAmount"  value="#{OtproductionScheduleBean.amount}"
                                                          min="1" size="8"
                                                          style="width: 100px;">

                                            </p:spinner>
                                            <p:spacer width="5px"/>
                                            <p:commandButton icon="ui-icon-plus" id="btnAddItem" 
                                                             actionListener="#{OtproductionScheduleBean.addProductsToOrder(OtproductionScheduleBean.orderUpdate.productionsOrders,OtproductionScheduleBean.orderUpdate)}" 
                                                             update="tfProductItem,tfAmount,otDataTableorderUpdate,tfEndHour,otDataTableProducts"
                                                             >
                                                <p:tooltip for="btnAddItem" value="Agregue productos a la orden"/>
                                            </p:commandButton>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="100%" align="center" colspan="4">


                                            <p:dataTable id="otDataTableorderUpdate" emptyMessage="No existe información para visualizar" 
                                                         paginator="true" rows="5"  
                                                         pageLinks="40"
                                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                                                         {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         value="#{OtproductionScheduleBean.orderUpdate.productionsOrders}" var="production"
                                                         rowKey="#{production.idProductionProduct}"
                                                         rowsPerPageTemplate="5,10" 
                                                         sortBy="#{production.idProductionProduct}"
                                                         >
                                                <p:column id="columnProduction" headerText="Producto" sortBy="#{production.idProductFormulation.description}">    
                                                    <center>
                                                        <p:outputLabel value="#{production.idProductFormulation.description}" id="lblProduction"/>
                                                        <p:tooltip for="lblProduction" value="#{production.idProductFormulation.description}"/>
                                                    </center>
                                                </p:column>
                                                <p:column id="columnAmountProduction" headerText="Cantidad" sortBy="#{production.amount}"
                                                          width="100">    
                                                    <center>
                                                        <p:spinner value="#{production.amount}" id="lblAmountProduction"  min="1" 
                                                                   size="8">
                                                            <p:ajax listener="#{OtproductionScheduleBean.calculateEndDate(OtproductionScheduleBean.orderUpdate)}" update=":formWizarProductionUpdate:tfEndHour" event="change"/>
                                                            <p:tooltip for="lblAmountProduction" value="#{production.amount}"/>
                                                        </p:spinner>
                                                    </center>
                                                </p:column>
                                            </p:dataTable>
                                        </td>
                                    </tr> 

                                </table>
                            </p:panel>
                        </p:tab> 
                        <p:tab title="Detalle" id="Productos" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para ver el detalle de la orden de producción">
                            <p:panel header="Productos de la Orden">

                                <p:dataTable id="otDataTableProducts" emptyMessage="No existe información para visualizar" 
                                             paginator="true" rows="5"  
                                             pageLinks="40"
                                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                                             {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             value="#{OtproductionScheduleBean.orderUpdate.productionsOrders}" var="product"
                                             rowKey="#{product.idProductionProduct}"
                                             rowsPerPageTemplate="5,10" 
                                             sortBy="#{product.idProductionProduct}"
                                             >
                                    <p:column id="columnProduction" headerText="Producto" 
                                              sortBy="#{product.idProductFormulation.description}">    
                                        <center>
                                            <p:outputLabel value="#{product.idProductFormulation.description}" id="lblProductionItem"/> 
                                            <p:tooltip value="#{product.idProductFormulation.description}" for="lblProductionItem"/>
                                        </center>
                                    </p:column>
                                    
                                    <p:column id="columnMarkItem" headerText="Marca" 
                                              sortBy="#{product.idProductFormulation.mark}">    
                                        <center>
                                            <p:outputLabel value="#{product.idProductFormulation.mark}" id="lblMarkItem"/> 
                                            <p:tooltip value="#{product.idProductFormulation.mark}" for="lblMarkItem"/>
                                        </center>
                                    </p:column>
                                    <p:column id="columnSerieItem" headerText="Serie" 
                                              sortBy="#{product.idProductFormulation.serie}">    
                                        <center>
                                            <p:outputLabel value="#{product.idProductFormulation.serie}" id="lblSerieItem"/> 
                                            <p:tooltip value="#{product.idProductFormulation.serie}" for="lblSerieItem"/>
                                        </center>
                                    </p:column>
                                    <p:column id="columnAmountItem" headerText="Cantidad" 
                                              sortBy="#{product.amount}">    
                                        <center>
                                            <p:outputLabel value="#{product.amount}" id="lblAmountItem"/> 
                                            <p:tooltip value="#{product.amount}" for="lblAmountItem"/>
                                        </center>
                                    </p:column>
                                    <p:column id="columnTimeItem" headerText="Tiempo de Fabricación C/U" 
                                              sortBy="#{OtproductionScheduleBean.getCountTimeProductByOrder(product.idProductFormulation)}">    
                                        <center>
                                            <p:outputLabel value="#{OtproductionScheduleBean.getCountTimeProductByOrder(product.idProductFormulation)} min" id="lblTimeItem"/> 
                                            <p:tooltip value="#{OtproductionScheduleBean.getCountTimeProductByOrder(product.idProductFormulation)} min" for="lblTimeItem"/>
                                        </center>
                                    </p:column>
                                    <p:column id="columnCostItem" headerText="Costo de Fabricación  C/U" 
                                              sortBy="#{OtproductionScheduleBean.getCountCostProductByOrder(product.idProductFormulation)}">    
                                        <center>
                                            <p:outputLabel value="#{OtproductionScheduleBean.getCountCostProductByOrder(product.idProductFormulation)} #{product.idProductFormulation.money.acronym}" id="lblCostItem"/> 
                                            <p:tooltip value="#{OtproductionScheduleBean.getCountCostProductByOrder(product.idProductFormulation)} #{product.idProductFormulation.money.acronym}" for="lblCostItem"/>
                                        </center>
                                    </p:column>
                                    <p:column id="columnAdmin" headerText="Admin">
                                        <center>
                                            <p:commandButton icon="ui-icon-search" id="btnSearchProduct"  update=":formWizardProcessSave"
                                                             action="#{OtproductionScheduleBean.selectProcessByProduct(product.idProductFormulation)}"
                                                             onsuccess="PF('dialogDetailSave').show()"
                                                             >
                                                <p:tooltip for="btnSearchProduct" value="Visualizar un Producto "/>
                                            </p:commandButton>
                                        </center>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>
                        </p:tab> 
                        <p:tab title="Confirmar Orden de Producción" id="tabConfirm" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para confirmar la orden">
                            <p:panel header="Confirmar Orden" >

                                <table width="100%" cellspacing="10">
                                    <tr>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="lblNameProduction" value="Descripción Orden*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel    id="lblNameProduction"  value="#{OtproductionScheduleBean.orderUpdate.name}">
                                            </p:outputLabel>

                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel  for="lblDescription" value="Especificación"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel    id="lblDescription"  value="#{OtproductionScheduleBean.orderUpdate.description}"
                                                                />
                                        </td>
                                    </tr>
                                    <tr> 
                                        <td width="10%" align="right">
                                            <p:outputLabel  value="Fecha de Inicio*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel value="#{OtproductionScheduleBean.getFormatDateGlobal('dd-MM-yyyy HH:mm:ss', OtproductionScheduleBean.orderUpdate.startDate)}"
                                                       />
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel   value="Fecha de Finalización*"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel value="#{OtproductionScheduleBean.getFormatDateGlobal('dd-MM-yyyy HH:mm:ss', OtproductionScheduleBean.orderUpdate.endDate)}"
                                                       />
                                        </td>
                                    </tr>
                                    <tr> 
                                        <td width="10%" align="right">
                                            <p:outputLabel  value="Cantidad de Productos"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel value="#{OtproductionScheduleBean.getCountListProduct(OtproductionScheduleBean.orderUpdate)}"
                                                           />
                                        </td>
                                        <td width="10%" align="right">
                                            <p:outputLabel   value="Tiempo Programado de Fabricación"/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel value="#{OtproductionScheduleBean.getCountTimeOrdenProduction(OtproductionScheduleBean.orderUpdate)} (min)"
                                            />
                                        </td>
                                    </tr>
                                    <tr> 
                                        <td width="10%" align="right">
                                            <p:outputLabel  value="Costo Programado de Fabricación "/>
                                        </td>
                                        <td width="40%" align="left">
                                            <p:outputLabel value="#{OtproductionScheduleBean.getCountCostOrdenProduction(OtproductionScheduleBean.orderUpdate)} $"
                                                           />
                                        </td>
                                        <td width="10%" align="right">
                                            
                                        </td>
                                        <td width="40%" align="left">
                                            
                                        </td>
                                    </tr>
                                    <tr>
                                        <td align="center" colspan="4">
                                            <p:commandButton value="Guardar" 
                                                             actionListener="#{OtproductionScheduleBean.updateOrderProduction()}"
                                            update=":formWizarProductionUpdate" oncomplete="PF('dialogProductionUpdate').hide();PF('dialogDetailSave').hide();PF('dialogProcessDetailSave').hide();PF('wizardUpdate').loadStep('tabGeneral', true)"/>
                                            <p:spacer width="20px"/>
                                            <p:commandButton value="Cancelar" actionListener="#{OtproductionScheduleBean.cleanValues()}"
                                                             update=":formWizarProductionUpdate" oncomplete="PF('dialogProductionUpdate').hide();PF('dialogDetailSave').hide();PF('dialogProcessDetailSave').hide();PF('wizardUpdate').loadStep('tabGeneral', true)"/>
                                        </td>
                                    </tr>
                                </table>

                            </p:panel>
                        </p:tab>
                    </p:wizard>
                </h:form>

            </p:dialog>
<!--            finaliza el dialogo para actualizar nuevas ordenes-->
        
      


            <!--            inicia el dialogo de detalle para guardar productos-->
            <p:dialog id="dialogDetailSave" widgetVar="dialogDetailSave" draggable="true" 
                      closable="true"  header="Detalle de las Ordenes de Producción" position="center top" width="800"
                      hideEffect="explode" modal="false" showEffect="explode" resizable="true">

                <h:form id="formWizardProcessSave" >
                    <p:tabView dynamic="true" cache="true" effect="explode" id="tabFather" scrollable="true" activeIndex="0" >
                        <p:tab title="Detalle del Producto">
                            <table width="98%" cellspacing="10" >
                                <tr>
                                    <td width="10%" align="right">
                                        <p:outputLabel  value="Imagen"/>
                                    </td>
                                    <td width="40%" align="left" valign="middle">
                                        <h:graphicImage value="#{OtproductionScheduleBean.searchImage(OtproductionScheduleBean.productFormulationSelected.pathPicture)}" alt="Imagen no disponible" id="imageSave" 
                                                        width="120" height="120"  />
                                        <p:spacer width="5px"/>
                                    </td>
                                    <td colspan="2"></td>

                                </tr>    
                                <tr>
                                    <td width="10%" align="right">
                                        <p:outputLabel  for="tfNameProduct" value="Nombre Producto"/>
                                    </td>
                                    <td width="40%" align="left">
                                        <p:outputLabel    id="tfNameProduct"  value="#{OtproductionScheduleBean.productFormulationSelected.description}"/>


                                    </td>
                                    <td width="10%" align="right">
                                        <p:outputLabel  for="tfDueDate" value="Fecha de Caducidad"/>
                                    </td>
                                    <td width="40%" align="left">
                                        <p:outputLabel    id="tfDueDate"  value="#{OtproductionScheduleBean.productFormulationSelected.expiryDate}"
                                                          />
                                    </td>
                                </tr>
                                <tr> 
                                    <td width="10%" align="right">
                                        <p:outputLabel  for="tfMarkProduct" value="Marca"/>
                                    </td>
                                    <td width="40%" align="left">
                                        <p:outputLabel    id="tfMarkProduct"  value="#{OtproductionScheduleBean.productFormulationSelected.serie}"
                                                          />
                                    </td>
                                    <td width="10%" align="right">
                                        <p:outputLabel  for="tfSerieProduct" value="Serie"/>
                                    </td>
                                    <td width="40%" align="left">
                                        <p:outputLabel    id="tfSerieProduct"  value="#{OtproductionScheduleBean.productFormulationSelected.serie}"
                                                          />
                                    </td>
                                </tr>
                                <tr>
                                    <td width="10%" align="right">
                                        <p:outputLabel  for="tfProductType" value="Tipo de Material"/>
                                    </td>
                                    <td width="40%" align="left">
                                        <p:outputLabel    id="tfProductType"  value="#{OtproductionScheduleBean.productFormulationSelected.typeMaterial}"
                                                          />
                                    </td>
                                    <td width="10%" align="right">
                                        <p:outputLabel  for="tfValueProduct" value="Valor del Producto"/>
                                    </td>
                                    <td width="40%" align="left">
                                        <p:outputLabel    id="tfValueProduct"  
                                                          value="#{OtproductionScheduleBean.productFormulationSelected.value} #{OtproductionScheduleBean.productFormulationSelected.money.description}"
                                                          />
                                    </td>
                                </tr>
                                <tr>
                                    <td width="10%" align="right">
                                        <p:outputLabel  for="tfProductPartner" value="Proveedor"/>
                                    </td>
                                    <td width="40%" align="left">
                                        <p:outputLabel    id="tfProductPartner"  
                                                          value="#{OtproductionScheduleBean.productFormulationSelected.supplierGuarantee.companyName}"
                                                          />
                                    </td>
                                    <td width="10%" align="right">
                                        <p:outputLabel  for="tfCostCenterProduct" value="Centro de Costos"/>
                                    </td>
                                    <td width="40%" align="left">
                                        <p:outputLabel    id="tfCostCenterProduct"  
                                                          value="#{OtproductionScheduleBean.productFormulationSelected.costCenter.description}"
                                                          />
                                    </td>
                                </tr>
                                <tr>
                                    <td width="10%" align="right">
                                        <p:outputLabel  for="tfStoreProduct" value="Almacén"/>
                                    </td>
                                    <td width="40%" align="left">
                                        <p:outputLabel    id="tfStoreProduct"  
                                                          value="#{OtproductionScheduleBean.productFormulationSelected.location.store.name}"
                                                          />
                                    </td>
                                    <td width="10%" align="right">
                                        <p:outputLabel  for="tfLocationProduct" value="Localización"/>
                                    </td>
                                    <td width="40%" align="left">
                                        <p:outputLabel    id="tfLocationProduct"  
                                                          value="#{OtproductionScheduleBean.productFormulationSelected.location.location}"
                                                          />
                                    </td>
                                </tr>
                                <tr>
                                    <td width="10%" align="right">
                                        <p:outputLabel  for="tfPriorityProduct" value="Prioridad"/>
                                    </td>
                                    <td width="40%" align="left">
                                        <p:outputLabel    id="tfPriorityProduct"  
                                                          value="#{OtproductionScheduleBean.productFormulationSelected.priority.name}"
                                                          />
                                    </td>
                                    <td width="10%" align="right">
                                        <p:outputLabel  for="tfUnityPackProduct" value="Unidad de Empaque"/>
                                    </td>
                                    <td width="40%" align="left">
                                        <p:outputLabel    id="tfUnityPackProduct"  
                                                          value="#{OtproductionScheduleBean.productFormulationSelected.packingUnit.acronym}"
                                                          />
                                    </td>
                                </tr>
                            </table>
                        </p:tab>
                        <p:tab title="Procesos">
                            <p:dataTable id="otDataTableProcess" emptyMessage="No existe información para visualizar" 
                                         paginator="true" rows="5" pageLinks="40"
                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                                         {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         value="#{OtproductionScheduleBean.listProcessProduct}" var="process"
                                         rowKey="#{process.idProcessProduct}"
                                         rowsPerPageTemplate="5,10" sortBy="#{process.idProcessProduct}"
                                         >
                                <p:column id="columnProcessName" headerText="Proceso" 
                                          sortBy="#{process.name}">    
                                    <center>
                                        <p:outputLabel value="#{process.name}" id="lblProcessName"/> 
                                        <p:tooltip value="#{process.name}" for="lblProcessName"/>
                                    </center>
                                </p:column>
                                <p:column id="columnProcessDescription" headerText="Descripción" 
                                          sortBy="#{process.description}">    
                                    <center>
                                        <p:outputLabel value="#{process.description}" id="lblProcessDescription"/> 
                                        <p:tooltip value="#{process.description}" for="lblProcessDescription"/>
                                    </center>
                                </p:column>
                                <p:column id="columnTimeProcess" headerText="Tiempo de Proceso" 
                                          sortBy="#{process.totalTimeProcess}">    
                                    <center>
                                        <p:outputLabel value="#{process.totalTimeProcess}" id="lblTimeProcess"/> 
                                        <p:tooltip value="#{process.totalTimeProcess}" for="lblTimeProcess"/>
                                    </center>
                                </p:column>
                                <p:column id="columnValueProcess" headerText="Valor de Proceso" 
                                          sortBy="#{process.totalValueProcess}">    
                                    <center>
                                        <p:outputLabel value="#{process.totalValueProcess}" id="lblValueProcess"/> 
                                        <p:tooltip value="#{process.totalValueProcess}" for="lblValueProcess"/>
                                    </center>
                                </p:column>
                                <p:column id="columnAdmin" headerText="Detalle">
                                    <center>
                                        <p:commandButton icon="ui-icon-search" id="btnSearch" actionListener="#{OtproductionScheduleBean.selectProcessByProcess(process)}"
                                                         update=":formWizardDetailProcessSave:" onsuccess="PF('dialogProcessDetailSave').show();"
                                                         >
                                            <p:tooltip for="btnSearch" value="Visualizar un Proceso"/>
                                        </p:commandButton>
                                    </center>
                                </p:column>
                            </p:dataTable>
                        </p:tab>
                    </p:tabView>

                </h:form>
            </p:dialog>
            <!--                finaliza el dialgo de detalle para guardar productos-->

            <!--            inicia el dialogo de detalle de procesos -->
            <p:dialog id="dialogProcessDetailSave" widgetVar="dialogProcessDetailSave" draggable="true" 
                      closable="true"  header="Detalle de los Procesos de la Orden de Producción" position="center top" width="800"
                      hideEffect="explode" modal="false" showEffect="explode" resizable="true">

                <h:form id="formWizardDetailProcessSave" >
                    <p:tabView dynamic="true" cache="true" effect="explode" id="tabFather" scrollable="true" activeIndex="0" >
                        <p:tab title="Datos del Proceso" id="tabProcess" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña para los datos básicos del proceso">
                            <p:panel header="Datos Básicos" >
                                <table width="98%" cellspacing="10" >
                                    <tr>
                                        <td width="20%" >
                                            <p:outputLabel  value="Nombre del Proceso" />
                                        </td>
                                        <td width="30%" >
                                            <p:outputLabel value="#{OtproductionScheduleBean.processProductSelected.name}" />
                                        </td>
                                        <td width="30%" >
                                            <p:outputLabel  value="Tipo de Proceso" />
                                        </td>
                                        <td width="20%" >
                                            <p:outputLabel  value="#{OtproductionScheduleBean.processProductSelected.processType.type}" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="30%" >
                                            <p:outputLabel  value="Descripción"/>
                                        </td>
                                        <td width="20%" >
                                            <p:outputLabel value="#{OtproductionScheduleBean.processProductSelected.description}" />
                                        </td>

                                        <td width="30%" >
                                            <p:outputLabel for="tfTotalValueInput" value="Total Valor Insumo"/>
                                        </td>
                                        <td width="20%">
                                            <p:outputLabel id="tfTotalValueInput" value="#{OtproductionScheduleBean.processProductSelected.totalValueInput}"
                                                           />
                                        </td>
                                    </tr>

                                    <tr>
                                        <td width="30%" >
                                            <p:outputLabel for="tfTotalTimeMachine" value="Total Tiempo Máquina"/>
                                        </td>
                                        <td width="20%">
                                            <p:outputLabel id="tfTotalTimeMachine" value="#{OtproductionScheduleBean.processProductSelected.totalTimeMachine}"/>
                                        </td>
                                        <td width="30%" >
                                            <p:outputLabel for="tfTotalValueMachine" value="Total Valor Máquina"/>
                                        </td>
                                        <td width="20%">
                                            <p:outputLabel id="tfTotalValueMachine" value="#{OtproductionScheduleBean.processProductSelected.totalValueMachine}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="30%" >
                                            <p:outputLabel for="tfTotalTimeEmployee" value="Total Tiempo Empleado"/>
                                        </td>
                                        <td width="20%">
                                            <p:outputLabel id="tfTotalTimeEmployee" value="#{OtproductionScheduleBean.processProductSelected.totalTimeEmployee}"/>
                                        </td>
                                        <td width="30%" >
                                            <p:outputLabel for="tfTotalValueEmployee" value="Total Valor Empleado"/>
                                        </td>
                                        <td width="20%">
                                            <p:outputLabel id="tfTotalValueEmployee" value="#{OtproductionScheduleBean.processProductSelected.totalValueEmployee}"/>
                                        </td>
                                    </tr> 
                                    <tr>
                                        <td width="30%" >
                                            <p:outputLabel for="tfTotalProcesTime" value="Total Tiempo Proceso"/>
                                        </td>
                                        <td width="20%">
                                            <p:outputLabel id="tfTotalProcesTime" value="#{OtproductionScheduleBean.processProductSelected.totalTimeProcess}"/>
                                        </td>
                                        <td width="30%" >
                                            <p:outputLabel for="tfTotalValueProcess" value="Total Valor Proceso"/>
                                        </td>
                                        <td width="20%">
                                            <p:outputLabel id="tfTotalValueProcess" value="#{OtproductionScheduleBean.processProductSelected.totalValueProcess}"/>
                                        </td>
                                    </tr>
                                </table>
                            </p:panel>
                        </p:tab>
                        <!--                        inicia pestaña para seleccionar máquinas                          -->
                        <p:tab title="Máquinas" id="tabMachine" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña de las Máquinas del Proceso">
                            <p:panel header="Máquinas" >

                                <p:dataTable id="dataTableMachines"
                                             var="machineProcess" 
                                             value="#{OtproductionScheduleBean.processProductSelected.processMachines}"
                                             rowKey="#{machineProcess.machine.name}"
                                             paginator="true" rows="10"  
                                             pageLinks="40"
                                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                                             {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             liveResize="true" rowsPerPageTemplate="15,30,50"
                                             paginatorPosition="top"
                                             sortBy="#{machineProcess.machine.name}">

                                    <p:column  headerText="Máquina" sortBy="#{machineProcess.machine.name}">
                                        <p:outputLabel value="#{machineProcess.machine.name}" id="machineTable"/>
                                        <p:tooltip value="#{machineProcess.machine.name}" for="machineTable"/>
                                    </p:column>
                                    <p:column  headerText="Marca" sortBy="#{machineProcess.machine.mark}">
                                        <p:outputLabel value="#{machineProcess.machine.mark}" id="outMarkMachine"/>
                                        <p:tooltip value="#{machineProcess.machine.mark}" for="outMarkMachine"/>
                                    </p:column>
                                    <p:column  headerText="Serie" sortBy="#{machineProcess.machine.serie}">
                                        <p:outputLabel value="#{machineProcess.machine.serie}" id="outSerieMachine"/>
                                        <p:tooltip value="#{machineProcess.machine.serie}" for="outSerieMachine"/>
                                    </p:column>
                                    <p:column  headerText="Tiempo de Uso (min)" sortBy="#{machineProcess.timeUse}">
                                        <p:outputLabel value="#{machineProcess.timeUse}" id="outTimeUse"/>
                                        <p:tooltip value="#{machineProcess.timeUse}" for="outTimeUse"/>
                                    </p:column>
                                    <p:column  headerText="Otros Gastos" sortBy="#{machineProcess.otherExpenses}">
                                        <p:outputLabel value="#{machineProcess.otherExpenses}" id="outOtherExpenses"/>
                                        <p:tooltip value="#{machineProcess.otherExpenses}" for="outOtherExpenses"/>
                                    </p:column>
                                    <p:column  headerText="Descripción Otros Gastos" sortBy="#{machineProcess.descriptionOtherExpenses}">
                                        <p:outputLabel value="#{machineProcess.descriptionOtherExpenses}" id="outDescriptionOtherExpenses"/>
                                        <p:tooltip value="#{machineProcess.descriptionOtherExpenses}" for="outDescriptionOtherExpenses"/>
                                    </p:column>
                                    
                                    <p:column  headerText="Valor Total" sortBy="#{machineProcess.totalValueMachine} #{machineProcess.machine.idMoney.acronym}">
                                        <p:outputLabel value="#{machineProcess.totalValueMachine} #{machineProcess.machine.idMoney.acronym}" id="totalValueMachine"/>
                                        <p:tooltip value="#{machineProcess.totalValueMachine} #{machineProcess.machine.idMoney.acronym}" for="totalValueMachine"/>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>
                        </p:tab>
                        <!--                        finaliza pestaña para seleccionar máquinas                          -->
                        <!--                        inicia pestaña para seleccionar empleados                          -->
                        <p:tab title="Mano de Obra" id="tabEmployee" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña de los Empleados del Proceso">
                            <p:panel header="Mano de Obra" >                                
                                <p:dataTable id="dataTableEmployees"
                                             var="employeeProcess" 
                                             value="#{OtproductionScheduleBean.processProductSelected.processEmployees}"
                                             rowKey="#{employeeProcess.employee.position}"
                                             paginator="true" rows="10"  
                                             pageLinks="40"
                                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                                             {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             liveResize="true" rowsPerPageTemplate="15,30,50"
                                             paginatorPosition="top"
                                             sortBy="#{employeeProcess.employee.position}">

                                    <p:column  headerText="Identificación" sortBy="#{employeeProcess.employee.idPerson.identification}">
                                        <p:outputLabel value="#{employeeProcess.employee.idPerson.identification}" id="employeeIdentification"/>
                                        <p:tooltip value="#{employeeProcess.employee.idPerson.identification}" for="employeeIdentification"/>
                                    </p:column>
                                    <p:column  headerText="Empleado" sortBy="#{employeeProcess.employee.position}">
                                        <p:outputLabel value="#{employeeProcess.employee.position}" id="employeeTable"/>
                                        <p:tooltip value="#{employeeProcess.employee.position}" for="employeeTable"/>
                                    </p:column>
                                    <p:column  headerText="Nombre" sortBy="#{employeeProcess.employee.idPerson.lastName} #{employeeProcess.employee.idPerson.firstName}">
                                        <p:outputLabel value="#{employeeProcess.employee.idPerson.lastName} #{employeeProcess.employee.idPerson.firstName}" 
                                                       id="employeeName"/>
                                        <p:tooltip value="#{employeeProcess.employee.idPerson.lastName} #{employeeProcess.employee.idPerson.firstName}" 
                                                   for="employeeName"/>
                                    </p:column>
                                    <p:column  headerText="Descripción Mano de Obra" sortBy="#{employeeProcess.laborDescription}">
                                        <p:outputLabel value="#{employeeProcess.laborDescription}" id="outDescriptionLabor"/>
                                        <p:tooltip value="#{employeeProcess.laborDescription}" for="outDescriptionLabor"/>
                                    </p:column>
                                    <p:column  headerText="Tiempo de Uso (min)" sortBy="#{employeeProcess.timeUse}">
                                        <p:outputLabel value="#{employeeProcess.timeUse}" id="outTimeUse"/>
                                        <p:tooltip value="#{employeeProcess.timeUse}" for="outTimeUse"/>
                                    </p:column>
                                    <p:column  headerText="Otros Gastos" sortBy="#{employeeProcess.otherExpenses}">
                                        <p:outputLabel value="#{employeeProcess.otherExpenses}" id="outOtherExpenses"/>
                                        <p:tooltip value="#{employeeProcess.otherExpenses}" for="outOtherExpenses"/>
                                    </p:column>
                                    <p:column  headerText="Descripción Otros Gastos" sortBy="#{employeeProcess.descriptionOtherExpenses}">
                                        <p:outputLabel value="#{employeeProcess.descriptionOtherExpenses}" id="outDescriptionOtherExpenses"/>
                                        <p:tooltip value="#{employeeProcess.descriptionOtherExpenses}" for="outDescriptionOtherExpenses"/>
                                    </p:column>
                                    <p:column  headerText="Valor Total" sortBy="#{employeeProcess.totalValueEmployee}$">
                                        <p:outputLabel value="#{employeeProcess.totalValueEmployee}$" id="totalValueEmployee"/>
                                        <p:tooltip value="#{employeeProcess.totalValueEmployee}$"  for="totalValueEmployee"/>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>
                        </p:tab>
                        <!--                        finaliza pestaña para seleccionar Empleados                          -->
                        <!--                        inicia pestaña para seleccionar Insumos                          -->
                        <p:tab title="Insumos" id="tabInput" titleStyleClass="tabTittleSavePerson" 
                               titletip="Pestaña de los Insumos del Proceso">
                            <p:panel header="Insumos" >

                                <p:dataTable id="dataTableInputs"
                                             var="inputProcess" 
                                             value="#{OtproductionScheduleBean.processProductSelected.processInputs}"
                                             rowKey="#{inputProcess.input.idInput}"
                                             paginator="true" rows="10"  
                                             pageLinks="40"
                                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                                             {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             liveResize="true" rowsPerPageTemplate="15,30,50"
                                             paginatorPosition="top"
                                             sortBy="#{inputProcess.input.idInput}"> 
                                    <p:column  headerText="Insumo" sortBy="#{inputProcess.input.description}">
                                        <p:outputLabel value="#{inputProcess.input.description}" id="inputOut"/>
                                        <p:tooltip value="#{inputProcess.input.description}" for="inputOut"/>
                                    </p:column>
                                    <p:column  headerText="Cantidad de Distribución" sortBy="#{inputProcess.amountDistribution} #{inputProcess.input.distributionUnit.acronym}">
                                        <p:outputLabel value="#{inputProcess.amountDistribution} #{inputProcess.input.distributionUnit.acronym}" id="outAmountDistribution"/>
                                        <p:tooltip value="#{inputProcess.amountDistribution} #{inputProcess.input.distributionUnit.acronym}" for="outAmountDistribution"/>
                                    </p:column>
                                    <p:column  headerText="% de Merma (Desperdicios)" sortBy="#{inputProcess.percentageResidue}">
                                        <p:outputLabel value="#{inputProcess.percentageResidue}" id="outPercentage"/>
                                        <p:tooltip value="#{inputProcess.percentageResidue}" for="outPercentage"/>
                                    </p:column>
                                    <p:column  headerText="Valor Total" sortBy="#{inputProcess.totalValueInput} #{inputProcess.input.money.acronym}">
                                        <p:outputLabel value="#{inputProcess.totalValueInput} #{inputProcess.input.money.acronym}" id="totalValueInput"/>
                                        <p:tooltip value="#{inputProcess.totalValueInput} #{inputProcess.input.money.acronym}" for="totalValueInput"/>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>
                        </p:tab>
                        <!--                        finaliza pestaña para seleccionar Insumos                          -->
                    </p:tabView>

                </h:form>
            </p:dialog>
            <!--                finaliza el dialogo de detalle de procesos-->

  
        
        

    </h:body>
</html>

