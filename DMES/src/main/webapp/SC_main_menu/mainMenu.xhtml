<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"      
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <f:view contentType="text/html">
        <h:head>
            <title>.:DMES:. - Menú Principal</title>
            <link rel="stylesheet" type="text/css" href="#{request.contextPath}/css/webStyle.css"/>
            
        </h:head>
        <h:body onload="onLoadMain()">
            <p:ajaxStatus onstart="PF('statusDialog').show()" oncomplete="PF('statusDialog').hide()"/>
            <p:dialog modal="true" widgetVar="statusDialog" header="Cargando..."
                      draggable="false" closable="false" resizable="false">
                <p:graphicImage value="/images/loadBar.gif"/>
            </p:dialog>
            <p:layout styleClass="layoutBordes">
                <p:layoutUnit position="north" collapseSize="25" collapsible="true" effect="explode"  gutter="1"
                              styleClass="layoutBordes" >
                    <div class="layoutNorth">
                        <table width="100%" >
                            <tr> 
                                <td width="20%">
                                    <p:graphicImage url="images/fondo-Little.png" styleClass="graphicLayoutNorth"
                                        height="70" width="150"/>
                                </td>
                                <td width="55%" align="center">
                                    <label class="labelTittle">Dynamic Manufacture</label>
                                </td>
                                <td width="280" align="center" valign="middle">
                                    <table class="dataLayoutNorth" >
                                        <tr>
                                            <td style="padding-top: 5px;padding-bottom:5px; padding-left:10px; ">
                                                <table  width="100%">
                                                    <tr>
                                                        <td colspan="2" align="center">
                                                            <label class="outPutLabelDate">#{templateBean.listDateHeader()}</label>
                                                        </td>
                                                        
                                                    </tr>
                                                    <tr>
                                                        <td><p:outputLabel value="Usuario: " styleClass="outPutLabelTittle"/></td>
                                                        <td>
                                                           #{templateBean.sessionBean.scUser.idPerson.firstName} 
                                                               #{templateBean.sessionBean.scUser.idPerson.lastName}
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td><p:outputLabel value="Grupo: " styleClass="outPutLabelTittle"/></td>
                                                        <td>
                                                            <p:outputLabel value="#{templateBean.sessionBean.scUser.idRole.name}"/>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                        </table>
                    </div>
                </p:layoutUnit>
                <p:layoutUnit position="west" collapseSize="25" collapsible="true" effect="bind" size="250" gutter="1"
                              styleClass="layoutBordesWest" resizable="true">
                    <f:facet name="header">    
                    Módulos
                    </f:facet>
                    
                    <h:form id="formTreeMenu">

                        <p:tree id="treeMenu" value="#{templateBean.root}" var="nodeMenu" 
                                highlight="true" 
                                selectionMode="single"
                                style="border: 0px; text-align: left; font-size: 10px; vertical-align: middle; cursor: default;" 
                                animate="true" dynamic="true" >
                            
                            <p:treeNode type="Home" styleClass="divItemTreeMenu" >
                                <p:graphicImage value="/images/#{nodeMenu.icone}" height="32" width="32"/>  
                                <h:outputText value="  #{nodeMenu.name}" />
                            </p:treeNode>
                            <p:treeNode type="Folder" styleClass="divItemTreeMenu">
                                <p:graphicImage value="/images/#{nodeMenu.icone}" height="28" width="28"/>  
                                <p:commandLink value="  #{nodeMenu.name}" action="#{templateBean.navigationTree(nodeMenu)}" styleClass="itemTreeMenu"/>
                            </p:treeNode>
                            <p:treeNode type="Item" styleClass="divItemTreeMenu">
                                <p:commandLink value="  #{nodeMenu.name}" action="#{templateBean.navigationTree(nodeMenu)}" styleClass="itemTreeMenu"
                                               update=":formMainTabs:tabMain"/>
                            </p:treeNode>
                            
                        </p:tree>
                    </h:form>
                </p:layoutUnit>
                <p:layoutUnit position="center" 
                              styleClass="layoutBordes">
                    
                    <div id="divLayoutCenter">
                        <h:form id="formMainTabs">
                            <p:tabView  id="tabMain" dynamic="true" effect="bounce" effectDuration="3000" scrollable="true" 
                                       binding="#{templateBean.tabView}">
                                
                            </p:tabView>
                        </h:form>
                    </div>
                    <script type="text/javascript">
                        alert("test");
                        function onLoadMain()
                        {
                            document.getElementById("divLayoutCenter").style.height = (screen.height-530)+"px";
                        }
                        setTimeout(
                        onLoadMain()
                       , 500);
                        
                    </script>
                </p:layoutUnit>
            </p:layout>
        </h:body>
    </f:view>
</html>

