<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"      
      >
    <h:head>
        <title>.:DMES:. - Usuarios</title>
    </h:head>
    <h:body>
        <p:ajaxStatus onstart="PF('statusDialog').show()" oncomplete="PF('statusDialog').hide()"/>
            <p:dialog modal="true" widgetVar="statusDialog" header="Cargando..."
                      draggable="false" closable="false" resizable="false">
                <p:graphicImage value="/images/loadBar.gif"/>
            </p:dialog>
        <div>



            <p:growl autoUpdate="true" showDetail="true" life="8000" />
            <h:form id="formUsers">
                <p:dataTable id="scUsersDataTable" draggableColumns="true" emptyMessage="dd" 
                         value="#{scusersBean.usersList}" var="user"
                         paginator="true" rows="15"  
                         pageLinks="40"
                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                         {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         rowKey="#{user.idUser}"
                         resizableColumns="true" 
                         liveResize="true" rowsPerPageTemplate="15,30,50" 
                         selectionMode="single" paginatorPosition="top"
                         sortBy="#{user.login}"
                         >
                <f:facet name="header">
                    <p:commandButton icon="ui-icon-plus" id="btnAdd" style="float: right;"  
                    oncomplete="PF('dialogRolesSave').show()">
                        <p:tooltip for="btnAdd" value="Agregar un Grupo"/>
                    </p:commandButton>
                </f:facet>
                
                <p:column headerText="Administración">
                    <center>
                        <p:commandButton icon="ui-icon-pencil" id="btnEdit" 
                        >
                            <p:tooltip for="btnEdit" value="Editar Grupo"/>
                        </p:commandButton>
                        <p:spacer width="10"/>
                        <p:commandButton icon="ui-icon-close" id="btnDelete" 
                        >
                            <p:tooltip for="btnDelete" value="Eliminar Grupo"/>
                        </p:commandButton>
                    </center>
                </p:column>
                        <p:column headerText="ID" sortBy="#{user.idUser}">    
                    <center>
                        <p:outputLabel value="#{user.idUser}"/>
                    </center>
                </p:column>
                        <p:column id="columnLogin" headerText="Usuario" sortBy="#{user.login}">    
                    <center>
                        <p:outputLabel value="#{user.login}" id="lblLogin"/>
                        <p:tooltip for="lblLogin" value="#{user.login}"/>
                    </center>
                </p:column>
                <p:column id="columnNames" headerText="Nombre" 
                                  sortBy="#{user.idPerson.lastName} #{user.idPerson.firstName}">    
                    <center>
                        <p:outputLabel value="#{user.idPerson.lastName} #{user.idPerson.firstName}" id="lblNames"/>
                        <p:tooltip for="lblNames" value="#{user.idPerson.lastName} #{user.idPerson.firstName}"/>
                    </center>
                </p:column>
                <p:column id="columnRolName" headerText="Grupo o Rol" 
                          sortBy="#{user.idRole.name}">    
                    <center>
                        <p:outputLabel value="#{user.idRole.name}" id="lblRoleName"/>
                        <p:tooltip for="lblRoleName" value="#{user.idRole.name}"/>
                    </center>
                </p:column>
                <p:column id="columnUserCreationDate" headerText="Fecha de Creación" 
                          sortBy="#{scusersBean.getFormatDate(user.creationDate)}">    
                    <center>
                        <p:outputLabel value="#{scusersBean.getFormatDate(user.creationDate)}" id="lblUserCreationDate"/>
                        <p:tooltip for="lblUserCreationDate" value="#{scusersBean.getFormatDate(user.creationDate)}"/>
                    </center>
                </p:column>
                    
            </p:dataTable>
            </h:form>
        </div>
        
    </h:body>
</html>

